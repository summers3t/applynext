import"../chunks/Bzak7iHL.js";import"../chunks/CYsr-paj.js";import{o as ai}from"../chunks/C96VhvSi.js";import{p as sr,f as _,d as o,a7 as Kl,u as r,r as n,b as c,c as ar,s as a,t as y,j as e,m as z,i as t,a9 as Pe,aa as li,aN as Wa,e as ke,a as le,aO as ds,ab as Be,ac as vs,aP as Xl,aQ as Jl}from"../chunks/BAKKtip-.js";import{s as q,e as j,g as ri,r as Ya}from"../chunks/C9sUR3Xw.js";import{i as p}from"../chunks/B8FQCOyo.js";import{e as $e,i as rt,p as Nt,s as St}from"../chunks/BwJYG__W.js";import{r as Ce,a as lr,s as et,b as he}from"../chunks/fZbFrnr1.js";import{a as us,s as Ia,b as Bt}from"../chunks/KN7HCD86.js";import{b as Qe}from"../chunks/CbCBvXji.js";import{b as Bs}from"../chunks/Cv3ihBae.js";import{i as rr}from"../chunks/VeT9vhzU.js";import{s as ii,a as kl}from"../chunks/DrU4zZF5.js";import{s as re}from"../chunks/Dew1yWqH.js";import{s as $l}from"../chunks/DIGPD2v9.js";import{p as er}from"../chunks/B-whpyTF.js";import{g as tr}from"../chunks/DXZnKqI-.js";import{a as ni,s as oi,d as ci}from"../chunks/DnaHdphz.js";import{p as Sa}from"../chunks/Bi-hDZpV.js";var di=_('<div style="color:#888;">No items defined for this project.</div>'),vi=_("<span></span>"),ui=_('<li style="margin:0.3em 0; display:flex; align-items:center; gap:0.7em;"><input type="checkbox"/> <label><!> </label></li>'),zi=_('<ul style="list-style:none;padding:0;margin:0;"></ul>'),_i=_('<div class="item-checklist"><!></div>');function hl(Za,Ge){sr(Ge,!1);let Is=Sa(Ge,"items",24,()=>[]),Ss=Sa(Ge,"selectedIds",24,()=>[]),ra=Sa(Ge,"disabled",8,!1),zs=Sa(Ge,"showStatus",8,!1),ia=Sa(Ge,"onChange",8,()=>{});function Vt(He){let w;Ss().includes(He)?w=Ss().filter(N=>N!==He):w=[...Ss(),He],ia()(w)}rr();var Jt=_i(),Qa=o(Jt);{var Ga=He=>{var w=di();c(He,w)},Ha=He=>{var w=zi();$e(w,5,Is,rt,(N,yt)=>{var Vs=ui(),Ct=o(Vs);Ce(Ct);var Ve=a(Ct,2),$t=o(Ve);{var K=be=>{var ut=vi();y(()=>us(ut,`display:inline-block; width:1em; height:1em; border-radius:50%; margin-right:0.5em;
                                background:${e(yt),r(()=>e(yt).status==="present"?"#47e37a":"#e74c3c")??""};
                                border:1px solid #aaa; vertical-align:middle;`)),c(be,ut)};p($t,be=>{zs()&&be(K)})}var Le=a($t);n(Ve),n(Vs),y(be=>{lr(Ct,be),Ct.disabled=ra(),et(Ct,"id",(e(yt),r(()=>"itemcheck-"+e(yt).id))),et(Ve,"for",(e(yt),r(()=>"itemcheck-"+e(yt).id))),q(Le,` ${e(yt),r(()=>e(yt).name)??""}`)},[()=>(Kl(Ss()),e(yt),r(()=>Ss().includes(e(yt).id)))]),j("change",Ct,()=>Vt(e(yt).id)),c(N,Vs)}),n(w),c(He,w)};p(Qa,He=>{Kl(Is()),r(()=>Is().length===0)?He(Ga):He(Ha,!1)})}n(Jt),c(Za,Jt),ar()}var mi=_('<p class="svelte-zjczzm">Loading project...</p>'),pi=_('<p style="color:red;" class="svelte-zjczzm"> </p>'),fi=_('<button style="width:100%; margin:1.3em 0 0.7em 0;">‚úèÔ∏è Edit Project</button>'),bi=_('<button class="delete-project-btn svelte-zjczzm" style="width:100%; margin-top:auto;">üóëÔ∏è Delete Project</button>'),gi=_('<p class="svelte-zjczzm">Loading tasks‚Ä¶</p>'),ji=_('<p style="color:red;" class="svelte-zjczzm"> </p>'),yi=_('<button type="button" style="margin-right:0.3em;" class="svelte-zjczzm">‚ùå</button>'),ki=_('<option class="svelte-zjczzm"> </option>'),hi=_('<form style="margin-top:1em;" class="svelte-zjczzm"><input type="text" placeholder="Task title" required style="margin-right:0.5em; width:25%;" class="svelte-zjczzm"/> <input type="text" placeholder="Description (optional)" style="margin-right:0.5em; width:35%;" class="svelte-zjczzm"/> <select style="margin-right:0.5em;" class="svelte-zjczzm"><option class="svelte-zjczzm">Open</option><option class="svelte-zjczzm">In Progress</option><option class="svelte-zjczzm">Done</option></select> <input type="date" style="margin-right:0.5em;" class="svelte-zjczzm"/> <!> <select style="margin-right:0.5em;" class="svelte-zjczzm"><option class="svelte-zjczzm">Unassigned</option><!></select> <!> <button type="submit" class="svelte-zjczzm"> </button> <button type="button" class="svelte-zjczzm">Cancel</button></form>'),wi=_('<div style="margin:2em 0;" class="svelte-zjczzm"><button class="toolbar-btn svelte-zjczzm">Add First Task</button> <!></div>'),xi=_('<button type="button" class="status-menu-dot svelte-zjczzm"></button>'),Ii=_('<div class="status-menu-popover svelte-zjczzm" role="dialog" aria-label="Change task status" tabindex="0"><div class="popover-arrow svelte-zjczzm"></div> <!></div>'),Si=_('<button class="expander svelte-zjczzm"> </button>'),Ti=_('<button type="button" style="margin-right:0.3em;" class="svelte-zjczzm">‚ùå</button>'),Ei=_('<option class="svelte-zjczzm"> </option>'),Ci=_('<td colspan="4" class="edit-form-row svelte-zjczzm"><form style="display:flex;align-items:center;gap:0.7em;" class="svelte-zjczzm"><input type="text" required style="width:28%;" class="svelte-zjczzm"/> <input type="text" placeholder="Description (optional)" style="width:38%;" class="svelte-zjczzm"/> <select class="svelte-zjczzm"><option class="svelte-zjczzm">Open</option><option class="svelte-zjczzm">In Progress</option><option class="svelte-zjczzm">Done</option></select> <input type="date" style="width:25%;" class="svelte-zjczzm"/> <!> <select style="margin-right:0.5em;" class="svelte-zjczzm"><option class="svelte-zjczzm">Unassigned</option><!></select>  <button type="submit" class="svelte-zjczzm">Save</button> <button type="button" class="svelte-zjczzm">Cancel</button></form></td>'),Di=_('<span class="new-badge svelte-zjczzm">New</span>'),Ai=_('<span class="svelte-zjczzm"> </span>'),qi=_('<span title="User not found" class="svelte-zjczzm"> </span>'),Pi=_('<span class="svelte-zjczzm"> </span>'),Mi=_('<td class="svelte-zjczzm"> <!></td> <td class="svelte-zjczzm"><!></td>  <td class="date-cell svelte-zjczzm"><!></td> <td class="edited-by svelte-zjczzm"><!></td>',1),Ri=_('<button type="button" style="margin-right:0.3em;" class="svelte-zjczzm">‚ùå</button>'),Ui=_('<option class="svelte-zjczzm"> </option>'),Fi=_('<tr class="insert-form-row svelte-zjczzm"><td colspan="5" class="svelte-zjczzm"><form class="svelte-zjczzm"><input type="text" placeholder="Task title" required style="margin-right:0.5em; width:25%;" class="svelte-zjczzm"/> <input type="text" placeholder="Description (optional)" style="margin-right:0.5em; width:35%;" class="svelte-zjczzm"/> <select style="margin-right:0.5em;" class="svelte-zjczzm"><option class="svelte-zjczzm">Open</option><option class="svelte-zjczzm">In Progress</option><option class="svelte-zjczzm">Done</option></select> <input type="date" style="margin-right:0.5em;" class="svelte-zjczzm"/> <!> <select style="margin-right:0.5em;" class="svelte-zjczzm"><option class="svelte-zjczzm">Unassigned</option><!></select> <!> <button type="submit" class="svelte-zjczzm"> </button> <button type="button" class="svelte-zjczzm">Cancel</button></form></td></tr>'),Li=_('<button type="button" class="status-menu-dot svelte-zjczzm"></button>'),Oi=_(`<div class="status-menu-popover svelte-zjczzm" role="dialog" aria-label="Change subtask status" tabindex="0" style="
				position: absolute;
				left: 50%;
				bottom: 120%;
				transform: translateX(-50%);
				z-index: 99999;
			"></div>`),Ni=_('<button type="button" style="margin-right:0.3em;" class="svelte-zjczzm">‚ùå</button>'),Bi=_('<option class="svelte-zjczzm"> </option>'),Vi=_('<td colspan="3" class="subtask-edit-row svelte-zjczzm"><form style="display:flex;align-items:center;gap:0.7em;" class="svelte-zjczzm"><input type="text" required style="width:38%;" class="svelte-zjczzm"/> <select class="svelte-zjczzm"><option class="svelte-zjczzm">Open</option><option class="svelte-zjczzm">In Progress</option><option class="svelte-zjczzm">Done</option></select> <input type="date" style="width:25%;" class="svelte-zjczzm"/> <!> <select style="margin-right:0.5em;" class="svelte-zjczzm"><option class="svelte-zjczzm">Unassigned</option><!></select> <button type="submit" class="svelte-zjczzm">Save</button> <button type="button" class="svelte-zjczzm">Cancel</button></form></td>'),Wi=_('<span class="new-badge svelte-zjczzm">New</span>'),Yi=_('<span class="svelte-zjczzm"> </span>'),Zi=_('<span title="User not found" class="svelte-zjczzm"> </span>'),Qi=_('<span class="svelte-zjczzm"> </span>'),Gi=_('<td class="svelte-zjczzm"> <!></td> <td class="svelte-zjczzm"><!></td> <td class="date-cell svelte-zjczzm"><!></td> <td class="edited-by svelte-zjczzm"><!></td>',1),Hi=_('<button type="button" style="margin-right:0.3em;" class="svelte-zjczzm">‚ùå</button>'),Ki=_('<option class="svelte-zjczzm"> </option>'),Xi=_('<tr class="subtask-insert-row svelte-zjczzm"><td colspan="5" class="svelte-zjczzm"><form class="svelte-zjczzm"><input type="text" placeholder="Subtask content" required style="margin-right:0.5em; width:32%;" class="svelte-zjczzm"/> <select style="margin-right:0.5em;" class="svelte-zjczzm"><option class="svelte-zjczzm">Open</option><option class="svelte-zjczzm">In Progress</option><option class="svelte-zjczzm">Done</option></select> <input type="date" style="margin-right:0.5em;" class="svelte-zjczzm"/> <!> <select style="margin-right:0.5em;" class="svelte-zjczzm"><option class="svelte-zjczzm">Unassigned</option><!></select> <button type="submit" class="svelte-zjczzm"> </button> <button type="button" class="svelte-zjczzm">Cancel</button></form></td></tr>'),Ji=_('<tr style="cursor:pointer;"><td class="svelte-zjczzm"></td><td class="short-id svelte-zjczzm"> </td><td style="position: relative;" class="svelte-zjczzm"><button type="button" class="status-dot status-dot-clickable svelte-zjczzm" title="Click to change status" aria-label="Change subtask status"></button> <!></td><!></tr> <!>',1),$i=_('<button type="button" style="margin-right:0.3em;" class="svelte-zjczzm">‚ùå</button>'),en=_('<option class="svelte-zjczzm"> </option>'),tn=_('<tr class="subtask-insert-row svelte-zjczzm"><td colspan="5" class="svelte-zjczzm"><form class="svelte-zjczzm"><input type="text" placeholder="Subtask content" required style="margin-right:0.5em; width:32%;" class="svelte-zjczzm"/> <select style="margin-right:0.5em;" class="svelte-zjczzm"><option class="svelte-zjczzm">Open</option><option class="svelte-zjczzm">In Progress</option><option class="svelte-zjczzm">Done</option></select> <input type="date" style="margin-right:0.5em;" class="svelte-zjczzm"/> <!> <select style="margin-right:0.5em;" class="svelte-zjczzm"><option class="svelte-zjczzm">Unassigned</option><!></select> <button type="submit" class="svelte-zjczzm"> </button> <button type="button" class="svelte-zjczzm">Cancel</button></form></td></tr>'),sn=_("<!> <!>",1),an=_('<tr style="cursor:pointer;"><td class="short-id svelte-zjczzm"> </td><td class="svelte-zjczzm"><span class="status-dot status-dot-clickable svelte-zjczzm" title="Click to change status"></span> <!></td><td class="svelte-zjczzm"><!></td><!></tr> <!> <!>',1),ln=_('<table class="task-table svelte-zjczzm"><thead class="svelte-zjczzm"><tr class="svelte-zjczzm"><th style="width:3em;" class="svelte-zjczzm">ID</th><th style="width:3em;" class="svelte-zjczzm"></th><th style="width:2em;" class="svelte-zjczzm"></th><th style="width:32%;" class="svelte-zjczzm">Task</th><th style="width:18%;" class="svelte-zjczzm">Assigned to</th><th class="date-cell svelte-zjczzm">Due Date</th><th style="width:12%;" class="svelte-zjczzm">Edited by</th></tr></thead><tbody class="svelte-zjczzm"></tbody></table>'),rn=_('<input type="text" placeholder="Task name" required maxlength="80" style="width:100%;font-weight:600;" class="svelte-zjczzm"/>'),nn=_('<span style="margin-left:0.8em;font-weight:bold;font-size:1.1em;" class="svelte-zjczzm"> <button class="edit-title-btn svelte-zjczzm" title="Edit task name" style="margin-left: 0.5em; background: none; border: none; color: #1976d2; cursor: pointer;">‚úèÔ∏è</button></span>'),on=_('<input type="text" placeholder="Task name" required maxlength="80" style="width:100%;font-weight:600;" class="svelte-zjczzm"/>'),cn=_('<span style="margin-left:0.8em;font-weight:bold;font-size:1.1em;" class="svelte-zjczzm"> <button class="edit-title-btn svelte-zjczzm" title="Edit task name" style="margin-left: 0.5em; background: none; border: none; color: #1976d2; cursor: pointer;">‚úèÔ∏è</button></span>'),dn=_('<select style="margin-left:0.5em;" class="svelte-zjczzm"><option class="svelte-zjczzm">Open</option><option class="svelte-zjczzm">In Progress</option><option class="svelte-zjczzm">Done</option></select>'),vn=_('<select style="margin-left:0.5em;" class="svelte-zjczzm"><option class="svelte-zjczzm">Open</option><option class="svelte-zjczzm">In Progress</option><option class="svelte-zjczzm">Done</option></select>'),un=_('<span class="svelte-zjczzm"> </span>'),zn=_('<div class="created-by-line svelte-zjczzm"><b class="svelte-zjczzm">Created by:</b> <!></div>'),_n=_('<span class="svelte-zjczzm"> </span>'),mn=_('<div class="created-by-line svelte-zjczzm">Created by: <!></div>'),pn=_('<option class="svelte-zjczzm"> </option>'),fn=_('<select style="margin-left:0.5em;" class="svelte-zjczzm"><option class="svelte-zjczzm">Unassigned</option><!></select>'),bn=_('<option class="svelte-zjczzm"> </option>'),gn=_('<select style="margin-left:0.5em;" class="svelte-zjczzm"><option class="svelte-zjczzm">Unassigned</option><!></select>'),jn=_('<input type="date" style="margin-left:0.5em;" class="svelte-zjczzm"/>'),yn=_('<input type="date" style="margin-left:0.5em;" class="svelte-zjczzm"/>'),kn=_('<textarea maxlength="200" rows="2" placeholder="Description (optional)" style="width:100%;margin-top:0.5em;" class="svelte-zjczzm"></textarea>'),hn=_('<span style="color:#888; margin-left:0.5em;" class="svelte-zjczzm">(No description provided)</span>'),wn=_('<div class="task-description-block svelte-zjczzm"><b class="svelte-zjczzm">Description:</b> <!></div>'),xn=_('<span style="color:#888;" class="svelte-zjczzm">No items defined for this project.</span>'),In=_(`<span style="color:#888; margin-left:0.8em;" class="svelte-zjczzm">No items are currently required for this task. Click button below to add
											requirements.</span>`),Sn=_('<span style="color:#888; margin-left:0.8em;" class="svelte-zjczzm">Saving‚Ä¶</span>'),Tn=_('<!> <!> <button class="expand-items-btn svelte-zjczzm">Hide details</button> <!>',1),En=_(`<span style="color:#888; margin-left:0.8em;" class="svelte-zjczzm">No items are currently required for this task. Click button below to add
											requirements.</span>`),Cn=_('<li class="svelte-zjczzm"><span class="status-dot svelte-zjczzm" style="background:#e74c3c; border-color:#aaa; width:0.9em; height:0.9em; border-radius:50%; display:inline-block; margin-right:0.4em;"></span> </li>'),Dn=_('<ul class="task-items-summary-list svelte-zjczzm"></ul> <span style="color:#e74c3c; margin-left:0.4em;" class="svelte-zjczzm"> </span>',1),An=_('<span style="color:#47e37a;" class="svelte-zjczzm">‚úî All required items are present.</span>'),qn=_('<!> <button class="expand-items-btn svelte-zjczzm">Show all items</button>',1),Pn=_('<div class="task-items-block svelte-zjczzm"><b class="svelte-zjczzm">Items required for this task:</b> <!></div>'),Mn=_('<p class="svelte-zjczzm">Loading‚Ä¶</p>'),Rn=_('<p style="color:#888;" class="svelte-zjczzm">No comments yet.</p>'),Un=_('<li class="comment-row svelte-zjczzm"><span class="comment-initials svelte-zjczzm"> </span> <span class="comment-meta svelte-zjczzm"><span class="comment-time svelte-zjczzm"> </span></span> <div class="comment-text svelte-zjczzm"> </div></li>'),Fn=_('<ul class="comments-list svelte-zjczzm"></ul>'),Ln=_('<button type="button" class="toolbar-btn svelte-zjczzm">Save</button>'),On=_('<button type="button" class="toolbar-btn svelte-zjczzm">Save</button>'),Nn=_('<button type="button" class="toolbar-btn svelte-zjczzm">Cancel</button>'),Bn=_('<button type="button" class="toolbar-btn svelte-zjczzm">Cancel</button>'),Vn=_(`<div class="right-pane-inner svelte-zjczzm"><div class="details-section svelte-zjczzm"><div class="section-header svelte-zjczzm"><span class="section-title svelte-zjczzm"> </span>  <!>  <!></div>  <!>  <!>  <!>  <!>  <!></div>   <section class="comments-section svelte-zjczzm"><h4 class="svelte-zjczzm">Comments</h4> <!> <form style="margin-top: 1em; display:flex; gap:0.7em;" class="svelte-zjczzm"><textarea placeholder="Write a comment‚Ä¶" required rows="2" style="flex:1;resize:vertical;" class="svelte-zjczzm">
							</textarea> <button type="submit" class="svelte-zjczzm"> </button></form></section>  <div class="right-pane-actions svelte-zjczzm" style="display: flex; gap: 1em; margin: 2em 0 0 0;"><!> <!></div></div>`),Wn=_('<div style="color:#c00;" class="svelte-zjczzm"> </div>'),Yn=_('<div style="color:#c00;" class="svelte-zjczzm"> </div>'),Zn=_('<th class="svelte-zjczzm">Remove</th>'),Qn=_('<option class="svelte-zjczzm">Admin</option>'),Gn=_('<select class="svelte-zjczzm"><!><option class="svelte-zjczzm">Editor</option><option class="svelte-zjczzm">Viewer</option></select>'),Hn=_('<button style="color:#fff; background:#e74c3c; border:none; padding:0.3em 1.1em; border-radius:0.5em; cursor:pointer;" class="svelte-zjczzm"> </button>'),Kn=_('<td class="svelte-zjczzm"><!></td>'),Xn=_('<tr class="svelte-zjczzm"><td class="svelte-zjczzm"> </td><td class="svelte-zjczzm"><!></td><td class="svelte-zjczzm"> </td><!></tr>'),Jn=_('<option class="svelte-zjczzm">Admin</option>'),$n=_('<div style="color:#888; font-size:0.98em; margin-bottom:0.5em;" class="svelte-zjczzm">Only the project creator can assign admin rights.</div>'),eo=_('<span style="color:#c00; margin-left:0.7em;" class="svelte-zjczzm"> </span>'),to=_('<span style="color:#080; margin-left:0.7em;" class="svelte-zjczzm"> </span>'),so=_('<div class="invite-container svelte-zjczzm"><h4 class="svelte-zjczzm">Invite a member</h4> <form style="display:flex; gap:0.7em; align-items:center;" class="svelte-zjczzm"><input type="email" placeholder="Email" required style="min-width:17em;" class="svelte-zjczzm"/> <select class="svelte-zjczzm"><!><option class="svelte-zjczzm">Editor</option><option class="svelte-zjczzm">Viewer</option></select> <!> <button type="submit" class="svelte-zjczzm">Invite</button></form> <!> <!></div>'),ao=_('<div class="panel-overlay svelte-zjczzm" role="button" tabindex="0" aria-label="Close panel"></div>  <div class="panel-drawer members-drawer svelte-zjczzm" role="dialog" aria-modal="true" aria-label="Project members"><h3 class="svelte-zjczzm">Members</h3> <!> <!> <table class="svelte-zjczzm"><thead class="svelte-zjczzm"><tr class="svelte-zjczzm"><th class="svelte-zjczzm">Email</th><th class="svelte-zjczzm">Role</th><th class="svelte-zjczzm">Status</th><!></tr></thead><tbody class="svelte-zjczzm"></tbody></table> <!> <button class="close-panel-btn svelte-zjczzm">Close</button></div>',1),lo=_('<span style="color: #080; margin-left:1em;" class="svelte-zjczzm">Project updated!</span>'),ro=_('<span style="color: #c00; margin-left:1em;" class="svelte-zjczzm"> </span>'),io=_('<div class="panel-overlay svelte-zjczzm"></div>  <div class="panel-drawer edit-drawer svelte-zjczzm" role="dialog" aria-modal="true" aria-label="Edit project"><h3 class="svelte-zjczzm">Edit Project</h3> <form style="display: flex; flex-direction: column; gap: 1em; max-width: 400px;" class="svelte-zjczzm"><div class="svelte-zjczzm"><label for="edit-name" class="svelte-zjczzm"><b class="svelte-zjczzm">Name</b></label> <input id="edit-name" type="text" maxlength="80" required style="width: 100%;" class="svelte-zjczzm"/></div> <div class="svelte-zjczzm"><label for="edit-desc" class="svelte-zjczzm"><b class="svelte-zjczzm">Description</b></label> <textarea id="edit-desc" maxlength="200" rows="2" style="width: 100%;" class="svelte-zjczzm"></textarea></div> <div class="svelte-zjczzm"><label for="edit-deadline" class="svelte-zjczzm"><b class="svelte-zjczzm">Deadline</b></label> <input id="edit-deadline" type="date" style="width: 100%;" class="svelte-zjczzm"/></div> <div class="svelte-zjczzm"><button type="submit" style="background:#1976d2;color:#fff;padding:0.5em 2em;border:none;border-radius:1em;" class="svelte-zjczzm"> </button> <!> <!></div></form> <button class="close-panel-btn svelte-zjczzm">Close</button></div>',1),no=_('<div style="color:#c00;" class="svelte-zjczzm"> </div>'),oo=_('<p class="svelte-zjczzm">Loading items‚Ä¶</p>'),co=_('<li style="display:flex;align-items:center;gap:1em;padding:0.6em 0;" class="svelte-zjczzm"><span class="svelte-zjczzm"> </span> <button type="button" aria-label="Toggle status" class="svelte-zjczzm"></button> <span style="flex:1" class="svelte-zjczzm"></span> <button type="button" style="background:#eee;color:#c00;border:none;border-radius:0.5em;padding:0.25em 1.1em;" class="svelte-zjczzm"> </button></li>'),vo=_('<form style="display:flex; gap:0.8em; align-items:center; margin-bottom:1em;" class="svelte-zjczzm"><input type="text" placeholder="Item name (e.g. ID Card)" required style="flex:1; min-width:0;" class="svelte-zjczzm"/> <button type="submit" style="background:#1976d2;color:#fff;border:none;padding:0.35em 1.5em;border-radius:0.6em;" class="svelte-zjczzm"> </button></form> <ul style="padding:0;" class="svelte-zjczzm"></ul>',1),uo=_('<div class="panel-overlay svelte-zjczzm" role="button" tabindex="0" aria-label="Close items panel"></div> <div class="panel-drawer items-drawer svelte-zjczzm" role="dialog" aria-modal="true" aria-label="Project items" tabindex="0"><h3 class="svelte-zjczzm">Items</h3> <!> <!> <button class="close-panel-btn svelte-zjczzm">Close</button></div>',1),zo=_('<option class="svelte-zjczzm"> </option>'),_o=_('<li style="display:flex;align-items:center;gap:0.7em;margin-bottom:0.35em;" class="svelte-zjczzm"><span class="svelte-zjczzm"></span> <input type="checkbox" class="svelte-zjczzm"/> <label style="flex:1;" class="svelte-zjczzm"> </label> <span class="svelte-zjczzm"> </span></li>'),mo=_('<div class="modal-backdrop svelte-zjczzm" tabindex="0" aria-modal="true" role="dialog" aria-label="Add Task"><div class="modal svelte-zjczzm" tabindex="0" role="document"><div class="modal-header svelte-zjczzm"><h3 class="svelte-zjczzm">Add Task</h3> <button type="button" aria-label="Close" class="close-modal-btn svelte-zjczzm">√ó</button></div> <div class="modal-body svelte-zjczzm"><form autocomplete="off" class="svelte-zjczzm"><div class="form-group svelte-zjczzm"><label for="task-title" class="svelte-zjczzm"><b class="svelte-zjczzm">Title</b> <span style="color:#e74c3c" class="svelte-zjczzm">*</span></label> <input id="task-title" type="text" placeholder="Enter task title" required maxlength="80" style="width:100%;margin-bottom:1em;" class="svelte-zjczzm"/></div> <div class="form-group svelte-zjczzm"><label for="task-desc" class="svelte-zjczzm"><b class="svelte-zjczzm">Description</b></label> <textarea maxlength="200" rows="3" placeholder="Description (optional)" class="svelte-zjczzm"></textarea></div> <div class="form-row svelte-zjczzm" style="display:flex;gap:1em;"><div class="svelte-zjczzm"><label for="task-status" class="svelte-zjczzm"><b class="svelte-zjczzm">Status</b></label> <select id="task-status" style="margin-left:0.5em;" class="svelte-zjczzm"><option class="svelte-zjczzm">Open</option><option class="svelte-zjczzm">In Progress</option><option class="svelte-zjczzm">Done</option></select></div> <div class="svelte-zjczzm"><label for="task-due-date" class="svelte-zjczzm"><b class="svelte-zjczzm">Due date</b></label> <input id="task-due-date" type="date" class="svelte-zjczzm"/></div> <div class="svelte-zjczzm"><label for="task-assigned-to" class="svelte-zjczzm"><b class="svelte-zjczzm">Assign to</b></label> <select id="task-assigned-to" style="margin-left:0.5em;" class="svelte-zjczzm"><option class="svelte-zjczzm">Unassigned</option><!></select></div></div> <div class="form-group svelte-zjczzm"><span class="form-label svelte-zjczzm"><b class="svelte-zjczzm">Items required</b></span> <ul style="list-style:none;padding:0;margin:0;" class="svelte-zjczzm"></ul></div> <div style="margin-top:1.2em;display:flex;gap:1em;" class="svelte-zjczzm"><button type="submit" class="toolbar-btn svelte-zjczzm">Save</button> <button type="button" class="toolbar-btn svelte-zjczzm">Save and Add Another</button> <button type="button" class="toolbar-btn svelte-zjczzm">Cancel</button></div></form></div> <div class="modal-footer svelte-zjczzm"><button type="button" class="toolbar-btn svelte-zjczzm">Cancel</button></div></div></div>'),po=_('<aside class="left-pane svelte-zjczzm"><button class="nav-btn svelte-zjczzm">‚Üê All Projects</button> <h2 style="margin:1.2em 0 0.5em 0;" class="svelte-zjczzm"> </h2> <div class="desc svelte-zjczzm"> </div> <div class="deadline svelte-zjczzm"><b class="svelte-zjczzm">Deadline:</b> </div> <div class="role-row svelte-zjczzm"><span class="role-badge svelte-zjczzm"> </span></div> <!> <button style="width:100%; margin-bottom:2em;">üë• Members</button> <button style="width:100%; margin-bottom:2em;">üì¶ Items</button> <div style="flex:1" class="svelte-zjczzm"></div> <!></aside> <div class="center-pane svelte-zjczzm"><div class="center-top svelte-zjczzm"><div class="action-toolbar svelte-zjczzm"><button class="toolbar-btn svelte-zjczzm">Add Task</button> <button class="toolbar-btn svelte-zjczzm">Insert</button> <button class="toolbar-btn svelte-zjczzm">Add Subtask</button> <button class="toolbar-btn svelte-zjczzm">‚Üë</button> <button class="toolbar-btn svelte-zjczzm">‚Üì</button> <button class="toolbar-btn svelte-zjczzm">Edit</button> <button class="toolbar-btn delete-btn svelte-zjczzm">Delete</button></div></div> <div class="center-main svelte-zjczzm"><!></div></div>  <aside class="right-pane svelte-zjczzm"><!></aside>  <!>  <!> <!> <!>',1),fo=_('<div class="project-page-layout svelte-zjczzm"><!></div>');function Uo(Za,Ge){sr(Ge,!1);const[Is,Ss]=ii(),ra=()=>kl(oi,"$statusFilter",Is),zs=()=>kl(ci,"$dueFilter",Is),ia=()=>kl(ni,"$searchQuery",Is),Vt=z(),Jt=z(),Qa=z(),Ga=z(),Ha=z(),He=z(),w=z(),N=z(),yt=z(),Vs=z(),Ct=z(),Ve=z(),$t=z();let K=z(""),Le=z(null),be=z([]),ut=z(""),Ws=z(!1),na=z(""),Tt=z(null),_s=null,Ys=z(null),Zs=null,Ta=z(null),Ka=null,Ts=z([]),oa=z(!1),Es=z(""),Qs=z(!1),es=z(!1),Dt=z(""),ca=z(""),Cs=z("open"),da=z(null),va="",ua=z(null),We=z(!1),Et=z([]);function ir(){t(es,!1),Xa=null,xl()}function wl(){ir()}function xl(){t(Dt,""),t(ca,""),t(Cs,"open"),t(da,null),t(kt,""),t(Et,[])}async function Il(s=null){var A,W,se,Ue,Xt,Ft;if(!e(Dt).trim())return null;if(e(m).some(_t=>_t.title.trim().toLowerCase()===e(Dt).trim().toLowerCase()))return alert("A task with this title already exists."),null;let l=e(m).length;s!==null&&s>=-1&&(l=s+1);const u={project_id:e(K),title:e(Dt).trim(),description:e(ca).trim(),status:e(Cs),due_date:e(da),sort_index:l,owner_id:(W=(A=e($))==null?void 0:A.user)==null?void 0:W.id,created_by_email:(Ue=(se=e($))==null?void 0:se.user)==null?void 0:Ue.email,last_edited_by:(Ft=(Xt=e($))==null?void 0:Xt.user)==null?void 0:Ft.id,assigned_to:va&&va.trim()!==""?va:null};let g,I=e(m).length===0;const{data:D,error:k}=await re.from("tasks").insert([u]).select("*, subtasks(*)");if(k||!D||!D[0])return alert("Error creating task: "+((k==null?void 0:k.message)??"unknown")),null;if(g=D[0],l>=0&&l<e(m).length){const _t=e(m).slice(0,l),Lt=e(m).slice(l);t(m,[..._t,g,...Lt]),await Ba(e(m))}else t(m,[...e(m),g]);if(I&&g.assigned_to)try{const{data:_t}=await re.from("user_emails").select("id, email").in("id",[g.assigned_to,g.last_edited_by].filter(Boolean));_t&&_t.forEach(Lt=>ds(de,e(de)[Lt.id]=Lt.email)),t(de,{...e(de)})}catch{}if(e(Et)&&e(Et).length>0){const _t=e(Et).map(ol=>{var aa,Va;return{task_id:g.id,item_id:ol,project_id:e(K),created_by:(Va=(aa=e($))==null?void 0:aa.user)==null?void 0:Va.id}}),{error:Lt}=await re.from("task_items").insert(_t);Lt&&console.error("Failed to link items to task:",Lt.message)}return await sa(),t(Ys,g.id),Zs&&clearTimeout(Zs),Zs=setTimeout(()=>{t(Ys,null)},6e4),t(Wt,{type:"task",id:g.id}),g}async function nr(){t(We,!0);let s=null;e(d)&&e(d).type==="task"?s=e(m).findIndex(l=>{var u;return l.id===((u=e(d))==null?void 0:u.id)}):e(m).length>0&&(s=e(m).length-1);const i=await Il(s);t(We,!1),i&&(xl(),wl())}let Xa=null;async function or(){var k;t(We,!0);const s=e(Dt).trim();if(!s){t(We,!1);return}if(e(m).some(A=>A.title.trim().toLowerCase()===s.toLowerCase())){alert("A task with this title already exists."),t(We,!1);return}let l=Xa;l===null&&(e(d)&&e(d).type==="task"?l=e(m).findIndex(A=>{var W;return A.id===((W=e(d))==null?void 0:W.id)}):e(m).length>0&&(l=e(m).length-1));const u=await Il(l);if(!u){t(We,!1);return}Xa=e(m).findIndex(A=>A.id===u.id);const g=e(Cs),I=va,D=e(Et).slice();t(Dt,""),t(ca,""),t(Cs,g),va=I,t(da,null),t(Et,D),t(We,!1),await Wa(),(k=e(ua))==null||k.focus()}let de=z({}),tt=z([]),Gs=z(!1),ms=z(""),Ds=z(!1),za=z(""),_a=z(!1),As=z(null),ps=z([]),Hs=z([]),Ea=z(!1),Ca=z(!1);function Sl(){t(Ca,!e(Ca))}async function cr(){if(!e(K)){t(tt,[]),t(Gs,!1);return}t(Gs,!0),t(ms,"");const{data:s,error:i}=await re.from("items").select("*").eq("project_id",e(K)).order("name",{ascending:!0});if(i){t(ms,i.message),t(tt,[]),t(Gs,!1);return}t(tt,s??[]),t(Gs,!1)}async function dr(){var l,u;if(!e(za).trim()||e(_a))return;t(_a,!0),t(ms,"");const{data:s,error:i}=await re.from("items").insert([{project_id:e(K),name:e(za).trim(),status:"not_present",created_by:((u=(l=e($))==null?void 0:l.user)==null?void 0:u.id)??null}]).select().single();if(t(_a,!1),i){t(ms,i.message);return}s&&(t(tt,[...e(tt),s]),t(za,""))}async function vr(s){if(!s||e(As))return;t(As,s);const{error:i}=await re.from("items").delete().eq("id",s);if(t(As,null),i){t(ms,i.message);return}t(tt,e(tt).filter(l=>l.id!==s))}async function ur(s,i){const l=i==="present"?"not_present":"present",{error:u}=await re.from("items").update({status:l}).eq("id",s);if(u){t(ms,u.message);return}t(tt,e(tt).map(g=>g.id===s?{...g,status:l}:g)),t(Ht,e(Ht).map(g=>g.item.id===s?{...g,item:{...g.item,status:l}}:g)),console.log("[DEBUG] After toggle, taskItems:",e(Ht))}async function zr(s){const{data:i,error:l}=await re.from("task_items").select("item_id").eq("task_id",s);return l?(console.error("Error fetching task items:",l.message),[]):i?i.map(u=>u.item_id):[]}async function _r(s){if(e(w)){if(t(Ea,!0),await re.from("task_items").delete().eq("task_id",e(w).id),s.length>0){const i=s.map(u=>{var g;return{task_id:e(w).id,item_id:u,project_id:e(K),created_by:(g=e($))==null?void 0:g.user.id}}),{error:l}=await re.from("task_items").insert(i);l&&alert("Error updating items: "+l.message)}await sa(),t(Ea,!1)}}async function Da({taskId:s=null,subtaskId:i=null}){if(!e(K)){t(Ts,[]),t(oa,!1);return}t(oa,!0);let l=re.from("comments").select("*").eq("project_id",e(K));if(s)l=l.eq("task_id",s).is("subtask_id",null);else if(i)l=l.eq("subtask_id",i);else{t(Ts,[]),t(oa,!1);return}const{data:u,error:g}=await l.order("created_at",{ascending:!0});g?(g.message,t(Ts,[])):t(Ts,u??[]),t(oa,!1)}let Wt=z(null),ma=z(null),qs=z(null),Tl=z(!1),El=z(!1),Yt=z(""),fs=z(""),ts=z("open"),bs=z(null),ss=z(""),Zt=z(""),as=z("open"),gs=z(null),ls=z("");async function mr(){var g;t(We,!0);const s=e(Yt).trim();if(!s){alert("Task title cannot be blank."),t(We,!1);return}if(e(m).some(I=>{var D;return I.id!==((D=e(w))==null?void 0:D.id)&&I.title.trim().toLowerCase()===s.toLowerCase()})){alert("A task with this title already exists."),t(We,!1);return}const{error:l}=await re.from("tasks").update({title:e(Yt),description:e(fs),status:e(ts),due_date:e(bs),assigned_to:e(ss)||null}).eq("id",(g=e(w))==null?void 0:g.id);if(l){alert("Error updating task: "+l.message),t(We,!1);return}const u=e(m).findIndex(I=>{var D;return I.id===((D=e(w))==null?void 0:D.id)});u!==-1&&(ds(m,e(m)[u]={...e(m)[u],title:e(Yt),description:e(fs),status:e(ts),due_date:e(bs),assigned_to:e(ss)}),t(m,[...e(m)])),t(We,!1)}async function pr(){var g,I,D;t(We,!0);const s=e(Zt).trim();if(!s){alert("Subtask content cannot be blank."),t(We,!1);return}const i=e(m).find(k=>{var A;return k.id===((A=e(d))==null?void 0:A.parentTaskId)});if(i==null?void 0:i.subtasks.some(k=>{var A;return k.id!==((A=e(N))==null?void 0:A.id)&&k.content.trim().toLowerCase()===s.toLowerCase()})){alert("A subtask with this content already exists under this task."),t(We,!1);return}const{error:u}=await re.from("subtasks").update({content:e(Zt),status:e(as),due_date:e(gs),last_edited_by:(g=e($))==null?void 0:g.user.id,assigned_to:e(ls)||null}).eq("id",(I=e(N))==null?void 0:I.id).eq("project_id",e(K));if(t(We,!1),u){alert("Error updating subtask: "+u.message);return}if(i&&e(N)){const k=i.subtasks.findIndex(A=>A.id===e(N).id);k!==-1&&(i.subtasks[k]={...i.subtasks[k],content:e(Zt),status:e(as),due_date:e(gs),last_edited_by:(D=e($))==null?void 0:D.user.id,assigned_to:e(ls)||null,updated_at:new Date().toISOString()},t(m,e(m).map(A=>A.id===i.id?{...A,subtasks:[...i.subtasks]}:A)))}}function fr(){e(w)&&(t(Yt,e(w).title??""),t(fs,e(w).description??""),t(ts,e(w).status??"open"),t(bs,e(w).due_date??null),t(ss,e(w).assigned_to??""),t(d,null))}function br(){var s,i,l,u;e(N)&&(t(Zt,((s=e(N))==null?void 0:s.content)??""),t(as,((i=e(N))==null?void 0:i.status)??"open"),t(gs,((l=e(N))==null?void 0:l.due_date)??null),t(ls,((u=e(N))==null?void 0:u.assigned_to)??""),t(d,null))}let pa=z(null),fa=z(null),$=z(ri($l)),Qt=z(!1),js=z(null),ba=z({x:0,y:0}),Aa=z(""),qa=z(""),Pa=z(null),Ma=z(!1),Ra=z(""),Ja=z(!1),rs=z(!1),Gt=z(!1),ys=z(""),ga=z("editor"),Ks=z(!1),ja=z(""),Ua=z(""),ya=z(""),$a=z(""),Xs=z(""),Fa=z(""),el=z(!1);const tl={open:"#fff",in_progress:"#1976d2",done:"#43a047"},sl="#e74c3c";let m=z([]),Js=z(!1),La=z(""),Ht=z([]),At=z(""),Ps=z(""),is=z("open"),Ut=z(null),ns=z(!1),ft=z(null),d=z(null),je=z(null),ks=z(""),ka=z(""),$s=z("open"),Ms=z(null),Rs=z(!1),kt=z(""),Us=z(""),it=z(null),ht=z(""),Kt=z("open"),qt=z(null),Pt=z(!1),qe=z(null),hs=z(""),ea=z("open"),Fs=z(null),ha=z(!1),os=z(""),wa=z(""),Ls=z(null),bt=z(new Set);function gr(s,i){t(js,i.id),t(Ls,null);const l=s.target,u=e(Tt);if(u&&l){const g=l.getBoundingClientRect(),I=u.getBoundingClientRect();t(ba,{x:g.left-I.left+g.width/2,y:g.top-I.top-8})}setTimeout(()=>{window.addEventListener("click",Cl,{once:!0})},1)}function Cl(){t(js,null)}async function jr(s,i){await re.from("tasks").update({status:i}).eq("id",s.id),t(js,null);const l=e(m).findIndex(u=>u.id===s.id);if(l!==-1){const u={...e(m)[l],status:i};t(m,[...e(m).slice(0,l),u,...e(m).slice(l+1)])}t(Wt,{type:"task",id:s.id})}function yr(s){var l;const i=(l=e(Ve)[s])==null?void 0:l.id;return e(m).findIndex(u=>u.id===i)}function xa(){t(rs,!1),t(Gt,!1)}function al(s){if(!s)return"";const i=s.slice(0,10).split("-");return i.length!==3?s:`${i[2]}.${i[1]}.${i[0]}`}function kr(s){if(!s)return"";const i=new Date(s),l=u=>u.toString().padStart(2,"0");return`${l(i.getDate())}.${l(i.getMonth()+1)}.${i.getFullYear()}, ${l(i.getHours())}:${l(i.getMinutes())}`}function Oa(s,i){if(!s||i==="done")return!1;const l=new Date;return new Date(s)<new Date(l.getFullYear(),l.getMonth(),l.getDate())}function Dl(s,i){return i?sl:tl[s]}function Al(s,i){t(Ls,i.id),t(js,null);let l;if(s instanceof MouseEvent)l=s.target.getBoundingClientRect();else if(s instanceof KeyboardEvent){const u=document.activeElement;u&&(l=u.getBoundingClientRect())}l&&(l.left+l.width/2,l.top-8),setTimeout(()=>{window.addEventListener("click",ql,{once:!0})},1)}function ql(){t(Ls,null)}async function hr(s,i,l){await re.from("subtasks").update({status:i}).eq("id",s.id),t(Ls,null);const u=e(m).findIndex(g=>g.id===l);if(u!==-1){const g=e(m)[u].subtasks.findIndex(I=>I.id===s.id);if(g!==-1){const I={...e(m)[u].subtasks[g],status:i},D=[...e(m)[u].subtasks.slice(0,g),I,...e(m)[u].subtasks.slice(g+1)],k={...e(m)[u],subtasks:D};t(m,[...e(m).slice(0,u),k,...e(m).slice(u+1)])}}t(Wt,{type:"subtask",id:s.id,parentTaskId:l})}function Os(s){if(!s)return"‚Äî";if(s.match(/^([a-zA-Z])[a-zA-Z.]*[._]?([a-zA-Z])?/i)){const l=s[0].toUpperCase(),u=s.match(/\.?([a-zA-Z])[a-zA-Z]*@/),g=u&&u[1]?u[1].toUpperCase():"";return(l+g).slice(0,2)}return s[0].toUpperCase()}async function wr(){t(Ra,""),t(Ja,!1),t(Ma,!0);const{error:s}=await re.from("projects").update({name:e(Aa).trim(),description:e(qa).trim(),deadline:e(Pa)}).eq("id",e(K));if(t(Ma,!1),s){t(Ra,s.message);return}await ta(),t(Ja,!0)}async function ta(){var k,A;if(!e(K)||e(K).length<10){t(Le,null),t(be,[]),t(Ws,!1);return}t(Ws,!0),t(na,"");const{data:s,error:i}=await re.from("projects").select("id, name, description, deadline, created_by").eq("id",e(K)).single();if(i||!s){t(na,"Project not found"),t(Ws,!1);return}t(Le,s),t(Qt,!!e(Le)&&!!((A=(k=e($))==null?void 0:k.user)!=null&&A.id)&&e(Le).created_by===e($).user.id);const{data:l,error:u}=await re.from("project_users").select("user_id, role, status, invited_email").eq("project_id",e(K));if(console.log("Member rows from Supabase:",l),u){t(na,u.message),t(be,[]),t(Ws,!1);return}const g=(l??[]).filter(W=>W.user_id).map(W=>W.user_id);let I={};if(g.length>0){const{data:W}=await re.from("user_emails").select("id, email").in("id",g);I=(W??[]).reduce((se,Ue)=>(se[Ue.id]=Ue.email,se),{})}t(be,(l??[]).map(W=>{var Ue,Xt,Ft,_t;let se=W.invited_email||W.user_id&&I[W.user_id]||"Unknown";return W.user_id&&((Xt=(Ue=e($))==null?void 0:Ue.user)==null?void 0:Xt.id)===W.user_id&&(se=((_t=(Ft=e($))==null?void 0:Ft.user)==null?void 0:_t.email)??"Unknown"),{user_id:W.user_id,email:se,role:W.role,status:W.status??(W.invited_email?"Invited":"Active"),invited_email:W.invited_email}}));const D=e(be).find(W=>{var se;return W.user_id===((se=e($))==null?void 0:se.user.id)});t(ut,(D==null?void 0:D.role)??""),t(Ws,!1)}async function xr(){if(t(ja,""),t(Ua,""),!e(ys).trim()||!e(K))return;if(t(Ks,!0),!e(ys).includes("@")){t(ja,"Please enter a valid email."),t(Ks,!1);return}const{error:s}=await re.from("project_users").insert([{project_id:e(K),user_id:null,invited_email:e(ys).trim().toLowerCase(),role:e(ga),status:"invited"}]);if(s){t(ja,s.message||"Error inviting user"),t(Ks,!1);return}t(Ua,"Invitation sent!"),t(ys,""),t(ga,"editor"),t(Ks,!1),await ta()}async function Ir(s,i,l){if(!e(K)||!s&&!l)return;t(ya,s||l||"");let u;if(s)u={project_id:e(K),user_id:s};else if(l)u={project_id:e(K),invited_email:l};else return;const{error:g}=await re.from("project_users").update({role:i}).match(u);t(ya,""),g?t($a,g.message):await ta()}async function Sr(s,i){if(!confirm("Are you sure you want to remove this member?"))return;t(Fa,""),t(Xs,s||i||"");let l;if(s)l={project_id:e(K),user_id:s};else if(i)l={project_id:e(K),invited_email:i};else return;const{error:u}=await re.from("project_users").delete().match(l);t(Xs,""),u?t(Fa,u.message):await ta()}async function Tr(){if(!e(K)||!e(ut)||e(ut)!=="admin"||!confirm("Are you sure you want to DELETE this project? This cannot be undone."))return;t(el,!0);const{error:s}=await re.from("projects").delete().eq("id",e(K));if(t(el,!1),s){""+s.message;return}tr("/projects")}async function Na(){if(!e(K)||e(K).length<10||!e($)){t(m,[]),t(Js,!1);return}if(t(Js,!0),t(La,""),!e($)){t(m,[]),t(Js,!1);return}const{data:s,error:i}=await re.from("tasks").select("*, subtasks(*)").eq("project_id",e(K)).order("sort_index",{ascending:!0});if(i){t(La,i.message),t(m,[]),t(Js,!1);return}t(m,(s??[]).map(k=>{const A=Array.isArray(k.subtasks)?k.subtasks.map(W=>({...W,sort_index:W.sort_index??0})):[];return{...k,subtasks:A.sort((W,se)=>W.sort_index-se.sort_index)}}));const l=e(m).map(k=>k.last_edited_by).filter(k=>!!k),u=e(m).flatMap(k=>Array.isArray(k.subtasks)?k.subtasks.map(A=>A.last_edited_by).filter(A=>!!A):[]),g=e(m).map(k=>k.assigned_to).filter(k=>!!k),I=e(m).flatMap(k=>Array.isArray(k.subtasks)?k.subtasks.map(A=>A.assigned_to).filter(A=>!!A):[]),D=Array.from(new Set([...l,...u,...g,...I]));if(D.length>0){const{data:k,error:A}=await re.from("user_emails").select("id, email").in("id",D);A?(console.error("Error loading user emails:",A.message),t(de,{})):t(de,(k??[]).reduce((W,se)=>(W[se.id]=se.email,W),{}))}else t(de,{});t(Js,!1),t(d,null),t(ft,null),t(je,null),t(it,null),t(qe,null),t(bt,new Set([...e(bt)].filter(k=>e(m).some(A=>A.id===k&&A.subtasks.length>0))))}async function sa(){if(!e(K)){t(Ht,[]);return}const{data:s,error:i}=await re.from("task_items").select("task_id, item_id, item:items(*)").eq("project_id",e(K));if(i){i.message,t(Ht,[]);return}t(Ht,(s??[]).map(l=>({...l,item:Array.isArray(l.item)?l.item[0]:l.item})).filter(l=>l.item))}async function Ba(s){await Promise.all(s.map((i,l)=>re.from("tasks").update({sort_index:l}).eq("id",i.id)))}async function ll(s,i){await Promise.all(i.map((l,u)=>re.from("subtasks").update({sort_index:u}).eq("id",l.id)))}function zt(){return e(ut)==="admin"||e(ut)==="editor"}async function Pl(s=null){if(!zt()||!e(At).trim()||!e($))return;t(ns,!0);const i=e(m).length===0;let l=e(m).length;const u={project_id:e(K),title:e(At).trim(),description:e(Ps).trim(),status:e(is),due_date:e(Ut),sort_index:l,owner_id:e($).user.id,created_by_email:e($).user.email,last_edited_by:e($).user.id,assigned_to:e(kt)&&e(kt).trim()!==""?e(kt):null};let g;if(s!==null){l=s+1;const{data:I,error:D}=await re.from("tasks").insert([{...u,sort_index:l}]).select("*, subtasks(*)");if(t(ns,!1),D||!I||!I[0]){alert("Error creating task: "+((D==null?void 0:D.message)??"unknown"));return}g=I[0];const k=e(m).slice(0,l),A=e(m).slice(l),W=[...k,g,...A];await Ba(W),t(m,W)}else{const{data:I,error:D}=await re.from("tasks").insert([u]).select("*, subtasks(*)");if(t(ns,!1),D||!I||!I[0]){alert("Error creating task: "+((D==null?void 0:D.message)??"unknown"));return}g=I[0],t(m,[...e(m),g]),t(m,e(m).map(A=>({...A})));const k=[g.assigned_to,g.last_edited_by].filter(Boolean);if(i&&k.length>0){const{data:A,error:W}=await re.from("user_emails").select("id, email").in("id",k);if(!W&&A)for(const se of A)ds(de,e(de)[se.id]=se.email);else W&&console.error("Failed to fetch user emails after first task insertion:",W.message);t(de,{...e(de)})}}if(e(Hs)&&e(Hs).length>0){const I=e(Hs).map(k=>{var A;return{task_id:g.id,item_id:k,project_id:e(K),created_by:(A=e($))==null?void 0:A.user.id}}),{error:D}=await re.from("task_items").insert(I);D&&console.error("Failed to link items to task:",D.message)}t(Hs,[]),await sa(),t(Ys,g.id),Zs&&clearTimeout(Zs),Zs=setTimeout(()=>{t(Ys,null)},6e4),t(Wt,{type:"task",id:g.id}),t(At,""),t(Ps,""),t(is,"open"),t(Ut,null),t(ft,null),t(kt,"")}function Er(s){t(ft,s),t(At,""),t(Ps,""),t(is,"open"),t(Ut,null),t(je,null),t(qe,null),t(it,null)}async function Ml(s){if(!zt()||!e(d)||e(d).type!=="task")return;const i=e(Ve).findIndex(k=>{var A;return k.id===((A=e(d))==null?void 0:A.id)});if(i===-1)return;const l=i+s;if(l<0||l>=e(Ve).length)return;const u=e(m).findIndex(k=>k.id===e(Ve)[i].id),g=e(m).findIndex(k=>k.id===e(Ve)[l].id);if(u===-1||g===-1)return;const I=[...e(m)],[D]=I.splice(u,1);I.splice(g,0,D);for(let k=0;k<I.length;++k)I[k].sort_index=k;t(m,I),await Ba(I),t(d,{type:"task",id:D.id}),t(Wt,{type:"task",id:D.id})}async function Cr(){var i,l,u,g;if(!zt()||!e(d))return;const s=e(d);if(s.type==="task"){const I=e(Ve).findIndex(k=>k.id===s.id);I<e(Ve).length-1?(i=e(Ve)[I+1])==null||i.id:I>0&&((l=e(Ve)[I-1])==null||l.id),await re.from("tasks").delete().eq("id",s.id).eq("project_id",e(K));const D=e(m).filter(k=>k.id!==s.id);await Ba(D),t(m,D),t(d,null)}else if(s.type==="subtask"&&s.parentTaskId){const I=e(m).find(se=>se.id===s.parentTaskId);if(!I)return;const D=I.subtasks,k=D.findIndex(se=>se.id===s.id);k<D.length-1?(u=D[k+1])==null||u.id:k>0&&((g=D[k-1])==null||g.id),await re.from("subtasks").delete().eq("id",s.id).eq("task_id",I.id).eq("project_id",e(K));const A=I.subtasks.filter(se=>se.id!==s.id);await ll(I.id,A);const W=e(m).findIndex(se=>se.id===I.id);W!==-1&&ds(m,e(m)[W]={...I,subtasks:A}),t(d,null)}}async function Dr(s){t(d,{type:"task",id:s}),t(ft,null),t(je,null),t(it,null),t(qe,null),await Da({taskId:s})}async function Ar(s,i){t(d,{type:"subtask",id:s,parentTaskId:i}),t(ft,null),t(je,null),t(it,null),t(qe,null),await Da({subtaskId:s})}async function rl(){if(!zt()||!e(d))return;const s=e(d);if(s.type==="task"){const i=e(m).find(l=>l.id===s.id);if(!i)return;t(je,i.id),t(ks,i.title),t(ka,i.description??""),t($s,i.status),t(Ms,i.due_date),t(ft,null),t(it,null),t(qe,null),t(Us,i.assigned_to||""),t(ps,await zr(i.id)),console.log("[DEBUG] Selected items for editing:",e(ps))}else if(s.type==="subtask"&&s.parentTaskId){const i=e(m).find(u=>u.id===s.parentTaskId),l=i==null?void 0:i.subtasks.find(u=>u.id===s.id);if(!l)return;t(qe,l.id),t(hs,l.content),t(ea,l.status),t(Fs,l.due_date),t(wa,l.assigned_to||""),t(ft,null),t(it,null),t(je,null)}}function Rl(){t(je,null),t(ks,""),t(ka,""),t(Ms,null),t($s,"open"),t(qe,null),t(hs,""),t(Fs,null),t(ea,"open")}async function qr(){var l,u;if(!zt()||!e(je)||!e(ks).trim()||!e($))return;t(Rs,!0),e(Tt)&&(_s=e(Tt).scrollTop);const s=e(Us)&&e(Us).trim()!==""?e(Us):null,{error:i}=await re.from("tasks").update({title:e(ks).trim(),description:e(ka).trim(),status:e($s),due_date:e(Ms),last_edited_by:(u=(l=e($))==null?void 0:l.user)==null?void 0:u.id,assigned_to:s}).eq("id",e(je)).eq("project_id",e(K));if(t(Rs,!1),i&&alert("Error saving task: "+i.message),await re.from("task_items").delete().eq("task_id",e(je)),e(ps)&&e(ps).length>0){const g=e(ps).map(D=>{var k;return{task_id:e(je),item_id:D,project_id:e(K),created_by:(k=e($))==null?void 0:k.user.id}}),{error:I}=await re.from("task_items").insert(g);I&&console.error("Failed to update linked items:",I.message)}t(ps,[]),await sa(),await Na(),_s!==null&&e(Tt)&&(ds(Tt,e(Tt).scrollTop=_s),_s=null),t(je,null)}function il(s,i){zt()&&(t(it,{taskId:s,index:i}),t(ht,""),t(Kt,"open"),t(qt,null),t(os,""),t(je,null),t(qe,null),t(ft,null),t(bt,new Set([...e(bt),s])))}async function Ul(s,i=null){if(!zt()||!e(ht).trim()||!e($))return;t(Pt,!0);const l=e(m).findIndex(se=>se.id===s);if(l===-1)return;const u=e(m)[l];let g,I=u.subtasks.length;const{data:D,error:k}=await re.from("subtasks").select("content").eq("task_id",s);if(k){alert("Error fetching subtasks: "+k.message),t(Pt,!1);return}const A=e(ht).trim();if(!A){alert("Subtask content cannot be blank."),t(Pt,!1);return}if((D??[]).some(se=>se.content.trim().toLowerCase()===A.toLowerCase())){alert("A subtask with this content already exists under this task."),t(Pt,!1);return}if(i!==null){I=i+1,console.log("Creating subtask with assigned_to:",e(os));const{data:se,error:Ue}=await re.from("subtasks").insert([{project_id:e(K),task_id:s,content:e(ht).trim(),status:e(Kt),due_date:e(qt),sort_index:I,owner_id:e($).user.id,last_edited_by:e($).user.id,created_by_email:e($).user.email,assigned_to:e(os)||null}]).select();if(t(Pt,!1),Ue||!se||!se[0]){alert("Error creating subtask: "+((Ue==null?void 0:Ue.message)??"unknown"));return}g=se[0];const Xt=u.subtasks.slice(0,I),Ft=u.subtasks.slice(I),_t=[...Xt,g,...Ft];await ll(u.id,_t),ds(m,e(m)[l]={...u,subtasks:_t})}else{const{data:se,error:Ue}=await re.from("subtasks").insert([{project_id:e(K),task_id:s,content:e(ht).trim(),status:e(Kt),due_date:e(qt),sort_index:I,owner_id:e($).user.id}]).select();if(t(Pt,!1),Ue||!se||!se[0]){alert("Error creating subtask: "+((Ue==null?void 0:Ue.message)??"unknown"));return}g=se[0],ds(m,e(m)[l]={...u,subtasks:[...u.subtasks,g]})}t(Ta,g.id),Ka&&clearTimeout(Ka),Ka=setTimeout(()=>{t(Ta,null)},6e4),t(Wt,{type:"subtask",id:g.id,parentTaskId:s}),t(ht,""),t(Kt,"open"),t(qt,null),t(it,null)}async function Fl(s){if(!zt()||!e(d)||e(d).type!=="subtask"||!e(d).parentTaskId)return;const i=e(d),l=e(m).findIndex(A=>A.id===i.parentTaskId);if(l===-1)return;const u=e(m)[l],g=u.subtasks.findIndex(A=>A.id===i.id);if(g===-1)return;const I=g+s;if(I<0||I>=u.subtasks.length)return;const D=[...u.subtasks],[k]=D.splice(g,1);D.splice(I,0,k),await ll(u.id,D),ds(m,e(m)[l]={...u,subtasks:D}),t(d,{type:"subtask",id:k.id,parentTaskId:u.id})}async function Pr(){if(!zt()||!e(qe)||!e(hs).trim()||!e($))return;t(ha,!0),e(Tt)&&(_s=e(Tt).scrollTop);const{error:s}=await re.from("subtasks").update({content:e(hs).trim(),status:e(ea),due_date:e(Fs),last_edited_by:e($).user.id,assigned_to:e(wa)||null}).eq("id",e(qe)).eq("project_id",e(K));t(ha,!1),s&&alert("Error saving subtask: "+s.message),await Na(),_s!==null&&e(Tt)&&(ds(Tt,e(Tt).scrollTop=_s),_s=null),t(qe,null)}async function Mr(){var l,u;if(!e(d)||!e(Es).trim()||e(Qs))return;t(Qs,!0);let s={content:e(Es).trim(),created_at:new Date().toISOString(),user_id:(u=(l=e($))==null?void 0:l.user)==null?void 0:u.id,project_id:e(K)};e(d).type==="task"&&(s.task_id=e(d).id),e(d).type==="subtask"&&(s.subtask_id=e(d).id);const{error:i}=await re.from("comments").insert([s]);if(t(Qs,!1),i){alert("Error adding comment: "+i.message);return}t(Es,""),e(d).type==="task"&&await Da({taskId:e(d).id}),e(d).type==="subtask"&&await Da({subtaskId:e(d).id})}function Rr(s){e(bt).has(s)?t(bt,new Set([...e(bt)].filter(i=>i!==s))):t(bt,new Set([...e(bt),s]))}ai(()=>{e(K)&&e(K).length>=10&&(ta(),Na(),cr(),sa())}),$l.subscribe(s=>{t($,s),e(K)&&e(K).length>=10&&(ta(),Na(),sa())});function Ur(){if(!e(d))return;const s=e(d);if(s.type==="task"){const i=e(m).findIndex(l=>l.id===s.id);Er(i)}else if(s.type==="subtask"&&s.parentTaskId){const i=e(m).find(u=>u.id===s.parentTaskId),l=(i==null?void 0:i.subtasks.findIndex(u=>u.id===s.id))??-1;il(s.parentTaskId,l)}}function Fr(){if(e(d)){if(e(d).type==="subtask"&&e(d).parentTaskId){const s=e(m).find(l=>{var u;return l.id===((u=e(d))==null?void 0:u.parentTaskId)}),i=(s==null?void 0:s.subtasks.findIndex(l=>{var u;return l.id===((u=e(d))==null?void 0:u.id)}))??-1;il(e(d).parentTaskId,i)}else if(e(d).type==="task"){const s=e(m).find(l=>{var u;return l.id===((u=e(d))==null?void 0:u.id)}),i=s&&s.subtasks.length>0?s.subtasks.length-1:-1;il(e(d).id,i)}}}function Lr(){if(!e(d))return;const s=e(d);s.type==="task"?Ml(-1):s.type==="subtask"&&Fl(-1)}Pe(()=>er,()=>{t(K,er.params.projectId)}),Pe(()=>(e(es),e(ua)),()=>{e(es)&&Wa().then(()=>{var s;return(s=e(ua))==null?void 0:s.focus()})}),Pe(()=>(e(d),e(m)),()=>{t(w,e(d)&&e(d).type==="task"?e(m).find(s=>{var i;return s.id===((i=e(d))==null?void 0:i.id)}):null)}),Pe(()=>(e(w),e(Ht)),()=>{t(Vt,e(w)?e(Ht).filter(s=>s.task_id===e(w).id).map(s=>s.item_id):[])}),Pe(()=>(e(m),e(Ht)),()=>{t($t,e(m).reduce((s,i)=>(s[i.id]=e(Ht).filter(l=>l.task_id===i.id).map(l=>l.item),s),{}))}),Pe(()=>(e(w),e($t)),()=>{t(Jt,e(w)?e($t)[e(w).id]??[]:[])}),Pe(()=>e(Jt),()=>{t(Qa,e(Jt).filter(s=>s.status==="not_present"))}),Pe(()=>e(Jt),()=>{t(Ga,e(Jt).filter(s=>s.status==="present"))}),Pe(()=>(e(w),e($t)),()=>{t(Ha,e(w)?e($t)[e(w).id]??[]:[])}),Pe(()=>(e(tt),e(Vt)),()=>{t(He,e(tt).filter(s=>e(Vt).includes(s.id)&&s.status==="not_present"))}),Pe(()=>e(d),()=>{e(d)&&t(Ca,!1)}),Pe(()=>(e(d),e(m)),()=>{var s;t(N,e(d)&&e(d).type==="subtask"?(((s=e(m).find(i=>{var l;return i.id===((l=e(d))==null?void 0:l.parentTaskId)}))==null?void 0:s.subtasks)??[]).find(i=>{var l;return i.id===((l=e(d))==null?void 0:l.id)}):null)}),Pe(()=>(e(Wt),Wa),()=>{e(Wt)&&(async()=>{await Wa();const{type:s,id:i,parentTaskId:l}=e(Wt);let u=null;s==="task"?u=document.getElementById("task-"+i):s==="subtask"&&(u=document.getElementById("subtask-"+i)),u&&u.scrollIntoView({behavior:"smooth",block:"nearest"}),t(Wt,null)})()}),Pe(()=>(e(ft),e(ma)),()=>{e(ft)!==null&&e(ma)&&setTimeout(()=>{var s;(s=e(ma))==null||s.scrollIntoView({behavior:"smooth",block:"center"})},0)}),Pe(()=>e(qs),()=>{e(qs)&&e(qs).scrollIntoView({behavior:"smooth",block:"nearest"})}),Pe(()=>e(w),()=>{e(w)&&(t(Yt,e(w).title??""),t(fs,e(w).description??""),t(ts,e(w).status??"open"),t(bs,e(w).due_date??null),t(ss,e(w).assigned_to??""))}),Pe(()=>e(N),()=>{e(N)&&(t(Zt,e(N).content??""),t(as,e(N).status??"open"),t(gs,e(N).due_date??null),t(ls,e(N).assigned_to??""))}),Pe(()=>(e(Yt),e(w),e(fs),e(ts),e(ss),e(bs)),()=>{var s,i,l,u,g;t(yt,e(Yt).trim()!==(((s=e(w))==null?void 0:s.title)??"").trim()||e(fs).trim()!==(((i=e(w))==null?void 0:i.description)??"").trim()||e(ts)!==(((l=e(w))==null?void 0:l.status)??"")||e(ss)!==(((u=e(w))==null?void 0:u.assigned_to)??"")||(e(bs)||"")!==(((g=e(w))==null?void 0:g.due_date)||""))}),Pe(()=>(e(Zt),e(N),e(as),e(ls),e(gs)),()=>{var s,i,l,u;t(Vs,e(Zt).trim()!==(((s=e(N))==null?void 0:s.content)??"").trim()||e(as)!==(((i=e(N))==null?void 0:i.status)??"")||e(ls)!==(((l=e(N))==null?void 0:l.assigned_to)??"")||(e(gs)??"")!==(((u=e(N))==null?void 0:u.due_date)??""))}),Pe(()=>e(pa),()=>{e(pa)&&e(pa).scrollIntoView({behavior:"smooth",block:"nearest"})}),Pe(()=>e(fa),()=>{e(fa)&&e(fa).scrollIntoView({behavior:"smooth",block:"nearest"})}),Pe(()=>(e(js),e(m)),()=>{t(Ct,e(js)?e(m).find(s=>s.id===e(js)):null)}),Pe(()=>(e(Le),e($)),()=>{var s,i;t(Qt,!!e(Le)&&!!((i=(s=e($))==null?void 0:s.user)!=null&&i.id)&&e(Le).created_by===e($).user.id)}),Pe(()=>(e(rs),e(Gt)),()=>{e(rs)||e(Gt)?document.body.style.overflow="hidden":document.body.style.overflow=""}),Pe(()=>(e(m),ra(),zs(),ia()),()=>{t(Ve,e(m).filter(s=>ra()==="all"||s.status===ra()).filter(s=>{if(zs()==="all")return!0;if(zs()==="none")return!s.due_date;if(!s.due_date)return!1;const i=new Date,l=new Date(s.due_date);return zs()==="overdue"?l<new Date(i.getFullYear(),i.getMonth(),i.getDate())&&s.status!=="done":zs()==="today"?l.toISOString().slice(0,10)===i.toISOString().slice(0,10):zs()==="upcoming"?l>i&&s.status!=="done":!0}).filter(s=>{if(!ia().trim())return!0;const i=ia().trim().toLowerCase();return s.title&&s.title.toLowerCase().includes(i)||s.description&&s.description.toLowerCase().includes(i)}))}),li(),rr();var nl=fo(),Or=o(nl);{var Nr=s=>{var i=mi();c(s,i)},Br=s=>{var i=ke(),l=le(i);{var u=I=>{var D=pi(),k=o(D,!0);n(D),y(()=>q(k,e(na))),c(I,D)},g=I=>{var D=ke(),k=le(D);{var A=W=>{var se=po(),Ue=le(se),Xt=o(Ue),Ft=a(Xt,2),_t=o(Ft,!0);n(Ft);var Lt=a(Ft,2),ol=o(Lt,!0);n(Lt);var aa=a(Lt,2),Va=a(o(aa));n(aa);var cl=a(aa,2),Ll=o(cl),Vr=o(Ll,!0);n(Ll),n(cl);var Ol=a(cl,2);{var Wr=J=>{var ne=fi();let fe;y(ve=>fe=Ia(ne,1,"toolbar-btn svelte-zjczzm",null,fe,ve),[()=>({"active-tab":e(Gt)})]),j("click",ne,()=>{t(Gt,!e(Gt)),t(rs,!1),e(Gt)&&e(Le)&&(t(Aa,e(Le).name),t(qa,e(Le).description??""),t(Pa,e(Le).deadline??null))}),c(J,ne)};p(Ol,J=>{e(Qt)&&J(Wr)})}var dl=a(Ol,2);let Nl;var vl=a(dl,2);let Bl;var Yr=a(vl,4);{var Zr=J=>{var ne=bi();y(()=>ne.disabled=e(el)),j("click",ne,Tr),c(J,ne)};p(Yr,J=>{(e(ut)==="admin"||e(Qt))&&J(Zr)})}n(Ue);var ul=a(Ue,2),zl=o(ul),Vl=o(zl),Wl=o(Vl),_l=a(Wl,2),ml=a(_l,2),pl=a(ml,2),fl=a(pl,2),bl=a(fl,2),Yl=a(bl,2);n(Vl),n(zl);var gl=a(zl,2),Qr=o(gl);{var Gr=J=>{var ne=gi();c(J,ne)},Hr=J=>{var ne=ke(),fe=le(ne);{var ve=_e=>{var Me=ji(),Ke=o(Me,!0);n(Me),y(()=>q(Ke,e(La))),c(_e,Me)},ze=_e=>{var Me=ke(),Ke=le(Me);{var st=me=>{var Ie=wi(),Se=o(Ie),at=a(Se,2);{var h=Oe=>{var Xe=hi(),V=o(Xe);Ce(V);var S=a(V,2);Ce(S);var ee=a(S,2);y(()=>{e(is),Be(()=>{})});var ye=o(ee);ye.value=ye.__value="open";var Te=a(ye);Te.value=Te.__value="in_progress";var Ye=a(Te);Ye.value=Ye.__value="done",n(ee);var Fe=a(ee,2);Ce(Fe);var ot=a(Fe,2);{var ct=P=>{var ie=yi();j("click",ie,()=>t(Ut,null)),c(P,ie)};p(ot,P=>{e(Ut)&&P(ct)})}var dt=a(ot,2);y(()=>{e(kt),Be(()=>{e(be)})});var vt=o(dt);vt.value=vt.__value="";var Ot=a(vt);$e(Ot,1,()=>e(be),rt,(P,ie)=>{var U=ke(),M=le(U);{var ae=oe=>{var we=ki(),b=o(we,!0);n(we);var v={};y(()=>{q(b,(e(ie),r(()=>e(ie).email))),v!==(v=(e(ie),r(()=>e(ie).user_id)))&&(we.value=(we.__value=(e(ie),r(()=>e(ie).user_id)))??"")}),c(oe,we)};p(M,oe=>{e(ie),r(()=>e(ie).user_id)&&oe(ae)})}c(P,U)}),n(dt);var mt=a(dt,2);hl(mt,{get items(){return e(tt)},get selectedIds(){return e(ps)},onChange:P=>t(ps,P)});var pt=a(mt,2),te=o(pt,!0);n(pt);var R=a(pt,2);n(Xe),y(P=>{pt.disabled=P,q(te,e(ns)?"Adding‚Ä¶":"Insert Task")},[()=>(e(ns),e(At),r(()=>e(ns)||!e(At).trim()))]),he(V,()=>e(At),P=>t(At,P)),he(S,()=>e(Ps),P=>t(Ps,P)),Qe(ee,()=>e(is),P=>t(is,P)),he(Fe,()=>e(Ut),P=>t(Ut,P)),Qe(dt,()=>e(kt),P=>t(kt,P)),j("click",R,()=>t(ft,null)),j("submit",Xe,Nt(()=>Pl(0))),c(Oe,Xe)};p(at,Oe=>{e(ft)===0&&Oe(h)})}n(Ie),y(Oe=>Se.disabled=Oe,[()=>(e(je),r(()=>!zt()||e(je)!==null))]),j("click",Se,()=>t(ft,0)),c(me,Ie)},nt=me=>{var Ie=ln(),Se=a(o(Ie));$e(Se,5,()=>e(Ve),rt,(at,h,Oe)=>{var Xe=an(),V=le(Xe);let S;var ee=o(V),ye=o(ee,!0);n(ee);var Te=a(ee),Ye=o(Te),Fe=a(Ye,2);{var ot=U=>{var M=Ii(),ae=a(o(M),2);$e(ae,1,()=>r(()=>Object.entries(tl)),rt,(oe,we)=>{var b=Xl(()=>Jl(e(we),2));let v=()=>e(b)[0],L=()=>e(b)[1];var B=ke(),C=le(B);{var f=T=>{var X=xi();y(()=>{us(X,`background:${L()??""}; border-color:${v(),e(Ct),r(()=>v()===e(Ct).status?"#1976d2":"#bbb")??""};`),et(X,"title",v()),et(X,"aria-label","Set status to "+v())}),j("click",X,()=>jr(e(Ct),v())),c(T,X)};p(C,T=>{v()!=="overdue"&&T(f)})}c(oe,B)}),n(M),Bs(M,oe=>t(pa,oe),()=>e(pa)),y(()=>us(M,`position:fixed; left:${e(ba),r(()=>e(ba).x)??""}px; top:${e(ba),r(()=>e(ba).y)??""}px; z-index:99999;`)),j("click",M,St(function(oe){Bt.call(this,Ge,oe)})),j("keydown",M,oe=>{oe.key==="Escape"&&Cl()}),c(U,M)};p(Fe,U=>{e(js)&&e(Ct)&&U(ot)})}n(Te);var ct=a(Te),dt=o(ct);{var vt=U=>{var M=Si(),ae=o(M,!0);n(M),y((oe,we)=>{et(M,"aria-label",oe),q(ae,we)},[()=>(e(bt),e(h),r(()=>e(bt).has(e(h).id)?"Collapse subtasks":"Expand subtasks")),()=>(e(bt),e(h),r(()=>e(bt).has(e(h).id)?"‚ûñ":"‚ûï"))]),j("click",M,St(()=>Rr(e(h).id))),c(U,M)};p(dt,U=>{e(h),r(()=>e(h).subtasks.length>0)&&U(vt)})}n(ct);var Ot=a(ct);{var mt=U=>{var M=Ci(),ae=o(M),oe=o(ae);Ce(oe);var we=a(oe,2);Ce(we);var b=a(we,2);y(()=>{e($s),Be(()=>{})});var v=o(b);v.value=v.__value="open";var L=a(v);L.value=L.__value="in_progress";var B=a(L);B.value=B.__value="done",n(b);var C=a(b,2);Ce(C);var f=a(C,2);{var T=x=>{var O=Ti();j("click",O,()=>t(Ms,null)),c(x,O)};p(f,x=>{e(Ms)&&x(T)})}var X=a(f,2);y(()=>{e(Us),Be(()=>{e(be)})});var Y=o(X);Y.value=Y.__value="";var F=a(Y);$e(F,1,()=>e(be),rt,(x,O)=>{var De=ke(),H=le(De);{var pe=Z=>{var E=Ei(),Q=o(E,!0);n(E);var Ee={};y(()=>{q(Q,(e(O),r(()=>e(O).email))),Ee!==(Ee=(e(O),r(()=>e(O).user_id)))&&(E.value=(E.__value=(e(O),r(()=>e(O).user_id)))??"")}),c(Z,E)};p(H,Z=>{e(O),r(()=>e(O).user_id)&&Z(pe)})}c(x,De)}),n(X);var G=a(X,2),ge=a(G,2);n(ae),n(M),y(x=>{G.disabled=x,ge.disabled=e(Rs)},[()=>(e(Rs),e(ks),r(()=>e(Rs)||!e(ks).trim()))]),he(oe,()=>e(ks),x=>t(ks,x)),he(we,()=>e(ka),x=>t(ka,x)),Qe(b,()=>e($s),x=>t($s,x)),he(C,()=>e(Ms),x=>t(Ms,x)),Qe(X,()=>e(Us),x=>t(Us,x)),j("click",ge,Rl),j("submit",ae,Nt(qr)),j("click",ae,St(function(x){Bt.call(this,Ge,x)})),c(U,M)},pt=U=>{var M=Mi(),ae=le(M),oe=o(ae),we=a(oe);{var b=x=>{var O=Di();c(x,O)};p(we,x=>{e(Ys),e(h),r(()=>e(Ys)===e(h).id)&&x(b)})}n(ae);var v=a(ae,2),L=o(v);{var B=x=>{var O=ke(),De=le(O);{var H=Z=>{var E=Ai(),Q=o(E,!0);n(E),y(Ee=>{et(E,"title",(e(de),e(h),r(()=>e(de)[e(h).assigned_to]))),q(Q,Ee)},[()=>(e(de),e(h),r(()=>Os(e(de)[e(h).assigned_to])))]),c(Z,E)},pe=Z=>{var E=qi(),Q=o(E,!0);n(E),y(()=>q(Q,(e(h),r(()=>e(h).assigned_to)))),c(Z,E)};p(De,Z=>{e(de),e(h),r(()=>e(de)[e(h).assigned_to])?Z(H):Z(pe,!1)})}c(x,O)},C=x=>{var O=vs("‚Äî");c(x,O)};p(L,x=>{e(h),r(()=>e(h).assigned_to)?x(B):x(C,!1)})}n(v);var f=a(v,2),T=o(f);{var X=x=>{var O=vs();y(De=>q(O,De),[()=>(e(h),r(()=>al(e(h).due_date)))]),c(x,O)};p(T,x=>{e(h),r(()=>e(h).due_date)&&x(X)})}n(f);var Y=a(f,2),F=o(Y);{var G=x=>{var O=Pi(),De=o(O,!0);n(O),y(H=>{et(O,"title",(e(de),e(h),r(()=>e(de)[e(h).last_edited_by]))),q(De,H)},[()=>(e(de),e(h),r(()=>Os(e(de)[e(h).last_edited_by])))]),c(x,O)},ge=x=>{var O=vs("‚Äî");c(x,O)};p(F,x=>{e(h),e(de),r(()=>e(h).last_edited_by&&e(de)[e(h).last_edited_by])?x(G):x(ge,!1)})}n(Y),y(()=>q(oe,`${e(h),r(()=>e(h).title)??""} `)),c(U,M)};p(Ot,U=>{e(je),e(h),r(()=>e(je)===e(h).id)?U(mt):U(pt,!1)})}n(V);var te=a(V,2);{var R=U=>{var M=Fi(),ae=o(M),oe=o(ae),we=o(oe);Ce(we);var b=a(we,2);Ce(b);var v=a(b,2);y(()=>{e(is),Be(()=>{})});var L=o(v);L.value=L.__value="open";var B=a(L);B.value=B.__value="in_progress";var C=a(B);C.value=C.__value="done",n(v);var f=a(v,2);Ce(f);var T=a(f,2);{var X=H=>{var pe=Ri();j("click",pe,()=>t(Ut,null)),c(H,pe)};p(T,H=>{e(Ut)&&H(X)})}var Y=a(T,2);y(()=>{e(kt),Be(()=>{e(be)})});var F=o(Y);F.value=F.__value="";var G=a(F);$e(G,1,()=>e(be),rt,(H,pe)=>{var Z=ke(),E=le(Z);{var Q=Ee=>{var xe=Ui(),Ae=o(xe,!0);n(xe);var Re={};y(()=>{q(Ae,(e(pe),r(()=>e(pe).email))),Re!==(Re=(e(pe),r(()=>e(pe).user_id)))&&(xe.value=(xe.__value=(e(pe),r(()=>e(pe).user_id)))??"")}),c(Ee,xe)};p(E,Ee=>{e(pe),r(()=>e(pe).user_id)&&Ee(Q)})}c(H,Z)}),n(Y);var ge=a(Y,2);hl(ge,{get items(){return e(tt)},get selectedIds(){return e(Hs)},onChange:H=>t(Hs,H)});var x=a(ge,2),O=o(x,!0);n(x);var De=a(x,2);n(oe),n(ae),n(M),Bs(M,H=>t(ma,H),()=>e(ma)),y(H=>{x.disabled=H,q(O,e(ns)?"Adding‚Ä¶":"Insert Task")},[()=>(e(ns),e(At),r(()=>e(ns)||!e(At).trim()))]),he(we,()=>e(At),H=>t(At,H)),he(b,()=>e(Ps),H=>t(Ps,H)),Qe(v,()=>e(is),H=>t(is,H)),he(f,()=>e(Ut),H=>t(Ut,H)),Qe(Y,()=>e(kt),H=>t(kt,H)),j("click",De,()=>t(ft,null)),j("submit",oe,Nt(()=>Pl(yr(Oe)))),j("click",oe,St(function(H){Bt.call(this,Ge,H)})),c(U,M)};p(te,U=>{e(ft)===Oe&&U(R)})}var P=a(te,2);{var ie=U=>{var M=sn(),ae=le(M);$e(ae,1,()=>(e(h),r(()=>e(h).subtasks)),rt,(b,v,L)=>{var B=Ji(),C=le(B);let f;var T=a(o(C)),X=o(T,!0);n(T);var Y=a(T),F=o(Y),G=a(F,2);{var ge=Z=>{var E=Oi();$e(E,5,()=>r(()=>Object.entries(tl)),rt,(Q,Ee)=>{var xe=Xl(()=>Jl(e(Ee),2));let Ae=()=>e(xe)[0],Re=()=>e(xe)[1];var Ze=ke(),wt=le(Ze);{var gt=jt=>{var lt=Li();y(()=>{us(lt,`background:${Re()??""}; border-color:${Ae(),e(v),r(()=>Ae()===e(v).status?"#1976d2":"#bbb")??""};`),et(lt,"title",Ae()),et(lt,"aria-label","Set status to "+Ae())}),j("click",lt,()=>hr(e(v),Ae(),e(h).id)),c(jt,lt)};p(wt,jt=>{Ae()!=="overdue"&&jt(gt)})}c(Q,Ze)}),n(E),Bs(E,Q=>t(fa,Q),()=>e(fa)),j("click",E,St(function(Q){Bt.call(this,Ge,Q)})),j("keydown",E,Q=>{Q.key==="Escape"&&ql()}),c(Z,E)};p(G,Z=>{e(Ls),e(v),r(()=>e(Ls)===e(v).id)&&Z(ge)})}n(Y);var x=a(Y);{var O=Z=>{var E=Vi(),Q=o(E),Ee=o(Q);Ce(Ee);var xe=a(Ee,2);y(()=>{e(ea),Be(()=>{})});var Ae=o(xe);Ae.value=Ae.__value="open";var Re=a(Ae);Re.value=Re.__value="in_progress";var Ze=a(Re);Ze.value=Ze.__value="done",n(xe);var wt=a(xe,2);Ce(wt);var gt=a(wt,2);{var jt=Ne=>{var ue=Ni();j("click",ue,()=>t(Fs,null)),c(Ne,ue)};p(gt,Ne=>{e(Fs)&&Ne(jt)})}var lt=a(gt,2);y(()=>{e(wa),Be(()=>{e(be)})});var Mt=o(lt);Mt.value=Mt.__value="";var ws=a(Mt);$e(ws,1,()=>e(be),rt,(Ne,ue)=>{var ce=ke(),Je=le(ce);{var xs=Ns=>{var xt=Bi(),It=o(xt,!0);n(xt);var Rt={};y(()=>{q(It,(e(ue),r(()=>e(ue).email))),Rt!==(Rt=(e(ue),r(()=>e(ue).user_id)))&&(xt.value=(xt.__value=(e(ue),r(()=>e(ue).user_id)))??"")}),c(Ns,xt)};p(Je,Ns=>{e(ue),r(()=>e(ue).user_id)&&Ns(xs)})}c(Ne,ce)}),n(lt);var la=a(lt,2),cs=a(la,2);n(Q),n(E),y(Ne=>{la.disabled=Ne,cs.disabled=e(ha)},[()=>(e(ha),e(hs),r(()=>e(ha)||!e(hs).trim()))]),he(Ee,()=>e(hs),Ne=>t(hs,Ne)),Qe(xe,()=>e(ea),Ne=>t(ea,Ne)),he(wt,()=>e(Fs),Ne=>t(Fs,Ne)),Qe(lt,()=>e(wa),Ne=>t(wa,Ne)),j("click",cs,Rl),j("submit",Q,Nt(Pr)),j("click",Q,St(function(Ne){Bt.call(this,Ge,Ne)})),c(Z,E)},De=Z=>{var E=Gi(),Q=le(E),Ee=o(Q),xe=a(Ee);{var Ae=ue=>{var ce=Wi();c(ue,ce)};p(xe,ue=>{e(v),e(Ta),r(()=>e(v).id===e(Ta))&&ue(Ae)})}n(Q);var Re=a(Q,2),Ze=o(Re);{var wt=ue=>{var ce=ke(),Je=le(ce);{var xs=xt=>{var It=Yi(),Rt=o(It,!0);n(It),y(yl=>{et(It,"title",(e(de),e(v),r(()=>e(de)[e(v).assigned_to]))),q(Rt,yl)},[()=>(e(de),e(v),r(()=>Os(e(de)[e(v).assigned_to])))]),c(xt,It)},Ns=xt=>{var It=Zi(),Rt=o(It,!0);n(It),y(()=>q(Rt,(e(v),r(()=>e(v).assigned_to)))),c(xt,It)};p(Je,xt=>{e(de),e(v),r(()=>e(de)[e(v).assigned_to])?xt(xs):xt(Ns,!1)})}c(ue,ce)},gt=ue=>{var ce=vs("‚Äî");c(ue,ce)};p(Ze,ue=>{e(v),r(()=>e(v).assigned_to)?ue(wt):ue(gt,!1)})}n(Re);var jt=a(Re,2),lt=o(jt);{var Mt=ue=>{var ce=vs();y(Je=>q(ce,Je),[()=>(e(v),r(()=>al(e(v).due_date)))]),c(ue,ce)};p(lt,ue=>{e(v),r(()=>e(v).due_date)&&ue(Mt)})}n(jt);var ws=a(jt,2),la=o(ws);{var cs=ue=>{var ce=Qi(),Je=o(ce,!0);n(ce),y(xs=>{et(ce,"title",(e(de),e(v),r(()=>e(de)[e(v).last_edited_by]))),q(Je,xs)},[()=>(e(de),e(v),r(()=>Os(e(de)[e(v).last_edited_by])))]),c(ue,ce)},Ne=ue=>{var ce=vs("‚Äî");c(ue,ce)};p(la,ue=>{e(v),e(de),r(()=>e(v).last_edited_by&&e(de)[e(v).last_edited_by])?ue(cs):ue(Ne,!1)})}n(ws),y(()=>q(Ee,`${e(v),r(()=>e(v).content)??""} `)),c(Z,E)};p(x,Z=>{e(qe),e(v),r(()=>e(qe)===e(v).id)?Z(O):Z(De,!1)})}n(C);var H=a(C,2);{var pe=Z=>{var E=Xi(),Q=o(E),Ee=o(Q),xe=o(Ee);Ce(xe);var Ae=a(xe,2);y(()=>{e(Kt),Be(()=>{})});var Re=o(Ae);Re.value=Re.__value="open";var Ze=a(Re);Ze.value=Ze.__value="in_progress";var wt=a(Ze);wt.value=wt.__value="done",n(Ae);var gt=a(Ae,2);Ce(gt);var jt=a(gt,2);{var lt=ce=>{var Je=Hi();j("click",Je,()=>t(qt,null)),c(ce,Je)};p(jt,ce=>{e(qt)&&ce(lt)})}var Mt=a(jt,2);y(()=>{e(os),Be(()=>{e(be)})});var ws=o(Mt);ws.value=ws.__value="";var la=a(ws);$e(la,1,()=>e(be),rt,(ce,Je)=>{var xs=ke(),Ns=le(xs);{var xt=It=>{var Rt=Ki(),yl=o(Rt,!0);n(Rt);var Hl={};y(()=>{q(yl,(e(Je),r(()=>e(Je).email))),Hl!==(Hl=(e(Je),r(()=>e(Je).user_id)))&&(Rt.value=(Rt.__value=(e(Je),r(()=>e(Je).user_id)))??"")}),c(It,Rt)};p(Ns,It=>{e(Je),r(()=>e(Je).user_id)&&It(xt)})}c(ce,xs)}),n(Mt);var cs=a(Mt,2),Ne=o(cs,!0);n(cs);var ue=a(cs,2);n(Ee),n(Q),n(E),Bs(E,ce=>t(qs,ce),()=>e(qs)),y(ce=>{cs.disabled=ce,q(Ne,e(Pt)?"Adding‚Ä¶":"Insert Subtask")},[()=>(e(Pt),e(ht),r(()=>e(Pt)||!e(ht).trim()))]),he(xe,()=>e(ht),ce=>t(ht,ce)),Qe(Ae,()=>e(Kt),ce=>t(Kt,ce)),he(gt,()=>e(qt),ce=>t(qt,ce)),Qe(Mt,()=>e(os),ce=>t(os,ce)),j("click",ue,()=>t(it,null)),j("submit",Ee,Nt(()=>Ul(e(h).id,L))),j("click",Ee,St(function(ce){Bt.call(this,Ge,ce)})),c(Z,E)};p(H,Z=>{e(it),e(h),r(()=>e(it)&&e(it).taskId===e(h).id&&e(it).index===L)&&Z(pe)})}y((Z,E,Q)=>{f=Ia(C,1,"subtask-row svelte-zjczzm",null,f,Z),et(C,"id",(e(v),r(()=>"subtask-"+e(v).id))),q(X,(e(v),r(()=>e(v).short_id))),us(F,`background:${E??""};
        border-color:${Q??""};`)},[()=>({"selected-row":e(d)&&e(d).type==="subtask"&&e(d).id===e(v).id}),()=>(e(v),r(()=>Dl(e(v).status,Oa(e(v).due_date,e(v).status)))),()=>(e(v),r(()=>Oa(e(v).due_date,e(v).status)?sl:"#aaa"))]),j("click",F,St(Z=>Al(Z,e(v)))),j("keydown",F,Z=>{(Z.key==="Enter"||Z.key===" ")&&!e(Ls)&&Al(Z,e(v))}),j("click",C,()=>Ar(e(v).id,e(h).id)),j("dblclick",C,rl),c(b,B)});var oe=a(ae,2);{var we=b=>{var v=tn(),L=o(v),B=o(L),C=o(B);Ce(C);var f=a(C,2);y(()=>{e(Kt),Be(()=>{})});var T=o(f);T.value=T.__value="open";var X=a(T);X.value=X.__value="in_progress";var Y=a(X);Y.value=Y.__value="done",n(f);var F=a(f,2);Ce(F);var G=a(F,2);{var ge=E=>{var Q=$i();j("click",Q,()=>t(qt,null)),c(E,Q)};p(G,E=>{e(qt)&&E(ge)})}var x=a(G,2);y(()=>{e(os),Be(()=>{e(be)})});var O=o(x);O.value=O.__value="";var De=a(O);$e(De,1,()=>e(be),rt,(E,Q)=>{var Ee=ke(),xe=le(Ee);{var Ae=Re=>{var Ze=en(),wt=o(Ze,!0);n(Ze);var gt={};y(()=>{q(wt,(e(Q),r(()=>e(Q).email))),gt!==(gt=(e(Q),r(()=>e(Q).user_id)))&&(Ze.value=(Ze.__value=(e(Q),r(()=>e(Q).user_id)))??"")}),c(Re,Ze)};p(xe,Re=>{e(Q),r(()=>e(Q).user_id)&&Re(Ae)})}c(E,Ee)}),n(x);var H=a(x,2),pe=o(H,!0);n(H);var Z=a(H,2);n(B),n(L),n(v),Bs(v,E=>t(qs,E),()=>e(qs)),y(E=>{H.disabled=E,q(pe,e(Pt)?"Adding‚Ä¶":"Insert Subtask")},[()=>(e(Pt),e(ht),r(()=>e(Pt)||!e(ht).trim()))]),he(C,()=>e(ht),E=>t(ht,E)),Qe(f,()=>e(Kt),E=>t(Kt,E)),he(F,()=>e(qt),E=>t(qt,E)),Qe(x,()=>e(os),E=>t(os,E)),j("click",Z,()=>t(it,null)),j("submit",B,Nt(()=>Ul(e(h).id,e(h).subtasks.length-1))),j("click",B,St(function(E){Bt.call(this,Ge,E)})),c(b,v)};p(oe,b=>{e(it),e(h),r(()=>e(it)&&e(it).taskId===e(h).id&&e(h).subtasks.length===0)&&b(we)})}c(U,M)};p(P,U=>{e(bt),e(h),r(()=>e(bt).has(e(h).id))&&U(ie)})}y((U,M,ae)=>{et(V,"id",(e(h),r(()=>"task-"+e(h).id))),S=Ia(V,1,"svelte-zjczzm",null,S,U),q(ye,(e(h),r(()=>e(h).short_id))),us(Ye,`background:${M??""};
         border-color:${ae??""};`)},[()=>{var U;return{"selected-row":e(d)&&e(d).type==="task"&&e(d).id===e(h).id,"highlight-missing-items":(U=e($t)[e(h).id])==null?void 0:U.some(M=>M.status==="not_present")}},()=>(e(h),r(()=>Dl(e(h).status,Oa(e(h).due_date,e(h).status)))),()=>(e(h),r(()=>Oa(e(h).due_date,e(h).status)?sl:"#aaa"))]),j("click",Ye,St(U=>gr(U,e(h)))),j("click",V,()=>Dr(e(h).id)),j("dblclick",V,rl),c(at,Xe)}),n(Se),n(Ie),c(me,Ie)};p(Ke,me=>{e(m),r(()=>e(m).length===0)?me(st):me(nt,!1)},!0)}c(_e,Me)};p(fe,_e=>{e(La)?_e(ve):_e(ze,!1)},!0)}c(J,ne)};p(Qr,J=>{e(Js)?J(Gr):J(Hr,!1)})}n(gl),Bs(gl,J=>t(Tt,J),()=>e(Tt)),n(ul);var jl=a(ul,2),Kr=o(jl);{var Xr=J=>{var ne=Vn(),fe=o(ne),ve=o(fe),ze=o(ve),_e=o(ze,!0);n(ze);var Me=a(ze,2);{var Ke=b=>{var v=ke(),L=le(v);{var B=f=>{var T=rn();Ce(T),he(T,()=>e(Yt),X=>t(Yt,X)),c(f,T)},C=f=>{var T=nn(),X=o(T),Y=a(X);n(T),y(()=>q(X,`${e(w),r(()=>e(w).title)??""} `)),j("click",Y,()=>{t(Tl,!0),t(Yt,e(w).title)}),c(f,T)};p(L,f=>{e(Tl)?f(B):f(C,!1)})}c(b,v)},st=b=>{var v=ke(),L=le(v);{var B=C=>{var f=ke(),T=le(f);{var X=F=>{var G=on();Ce(G),he(G,()=>e(Zt),ge=>t(Zt,ge)),c(F,G)},Y=F=>{var G=cn(),ge=o(G),x=a(ge);n(G),y(()=>q(ge,`${e(N),r(()=>e(N).content)??""} `)),j("click",x,()=>{t(El,!0),t(Zt,e(N).content)}),c(F,G)};p(T,F=>{e(El)?F(X):F(Y,!1)})}c(C,f)};p(L,C=>{e(d),e(N),r(()=>e(d)&&e(d).type==="subtask"&&e(N))&&C(B)},!0)}c(b,v)};p(Me,b=>{e(d),e(w),r(()=>e(d)&&e(d).type==="task"&&e(w))?b(Ke):b(st,!1)})}var nt=a(Me,2);{var me=b=>{var v=dn();y(()=>{e(ts),Be(()=>{})});var L=o(v);L.value=L.__value="open";var B=a(L);B.value=B.__value="in_progress";var C=a(B);C.value=C.__value="done",n(v),Qe(v,()=>e(ts),f=>t(ts,f)),c(b,v)},Ie=b=>{var v=ke(),L=le(v);{var B=C=>{var f=vn();y(()=>{e(as),Be(()=>{})});var T=o(f);T.value=T.__value="open";var X=a(T);X.value=X.__value="in_progress";var Y=a(X);Y.value=Y.__value="done",n(f),Qe(f,()=>e(as),F=>t(as,F)),c(C,f)};p(L,C=>{e(d),e(N),r(()=>e(d)&&e(d).type==="subtask"&&e(N))&&C(B)},!0)}c(b,v)};p(nt,b=>{e(d),e(w),r(()=>e(d)&&e(d).type==="task"&&e(w))?b(me):b(Ie,!1)})}n(ve);var Se=a(ve,2);{var at=b=>{var v=zn(),L=a(o(v),2);{var B=f=>{var T=un(),X=o(T,!0);n(T),y(Y=>{et(T,"title",(e(w),r(()=>e(w).created_by_email))),q(X,Y)},[()=>(e(w),e($),r(()=>{var Y,F;return e(w).created_by_email===((F=(Y=e($))==null?void 0:Y.user)==null?void 0:F.email)?"You":Os(e(w).created_by_email)}))]),c(f,T)},C=f=>{var T=vs("‚Äî");c(f,T)};p(L,f=>{e(w),r(()=>e(w).created_by_email)?f(B):f(C,!1)})}n(v),c(b,v)},h=b=>{var v=ke(),L=le(v);{var B=C=>{var f=mn(),T=a(o(f));{var X=F=>{var G=_n(),ge=o(G,!0);n(G),y(x=>{et(G,"title",(e(N),r(()=>e(N).created_by_email))),q(ge,x)},[()=>(e(N),e($),r(()=>{var x,O;return e(N).created_by_email===((O=(x=e($))==null?void 0:x.user)==null?void 0:O.email)?"You":Os(e(N).created_by_email)}))]),c(F,G)},Y=F=>{var G=vs("‚Äî");c(F,G)};p(T,F=>{e(N),r(()=>e(N).created_by_email)?F(X):F(Y,!1)})}n(f),c(C,f)};p(L,C=>{e(d),e(N),r(()=>e(d)&&e(d).type==="subtask"&&e(N))&&C(B)},!0)}c(b,v)};p(Se,b=>{e(d),e(w),r(()=>e(d)&&e(d).type==="task"&&e(w))?b(at):b(h,!1)})}var Oe=a(Se,2);{var Xe=b=>{var v=fn();y(()=>{e(ss),Be(()=>{e(be)})});var L=o(v);L.value=L.__value="";var B=a(L);$e(B,1,()=>e(be),rt,(C,f)=>{var T=ke(),X=le(T);{var Y=F=>{var G=pn(),ge=o(G,!0);n(G);var x={};y(()=>{q(ge,(e(f),r(()=>e(f).email))),x!==(x=(e(f),r(()=>e(f).user_id)))&&(G.value=(G.__value=(e(f),r(()=>e(f).user_id)))??"")}),c(F,G)};p(X,F=>{e(f),r(()=>e(f).user_id)&&F(Y)})}c(C,T)}),n(v),Qe(v,()=>e(ss),C=>t(ss,C)),c(b,v)},V=b=>{var v=ke(),L=le(v);{var B=C=>{var f=gn();y(()=>{e(ls),Be(()=>{e(be)})});var T=o(f);T.value=T.__value="";var X=a(T);$e(X,1,()=>e(be),rt,(Y,F)=>{var G=ke(),ge=le(G);{var x=O=>{var De=bn(),H=o(De,!0);n(De);var pe={};y(()=>{q(H,(e(F),r(()=>e(F).email))),pe!==(pe=(e(F),r(()=>e(F).user_id)))&&(De.value=(De.__value=(e(F),r(()=>e(F).user_id)))??"")}),c(O,De)};p(ge,O=>{e(F),r(()=>e(F).user_id)&&O(x)})}c(Y,G)}),n(f),Qe(f,()=>e(ls),Y=>t(ls,Y)),c(C,f)};p(L,C=>{e(d),e(N),r(()=>e(d)&&e(d).type==="subtask"&&e(N))&&C(B)},!0)}c(b,v)};p(Oe,b=>{e(d),e(w),r(()=>e(d)&&e(d).type==="task"&&e(w))?b(Xe):b(V,!1)})}var S=a(Oe,2);{var ee=b=>{var v=jn();Ce(v),he(v,()=>e(bs),L=>t(bs,L)),c(b,v)},ye=b=>{var v=ke(),L=le(v);{var B=C=>{var f=yn();Ce(f),he(f,()=>e(gs),T=>t(gs,T)),c(C,f)};p(L,C=>{e(d),e(N),r(()=>e(d)&&e(d).type==="subtask"&&e(N))&&C(B)},!0)}c(b,v)};p(S,b=>{e(d),e(w),r(()=>e(d)&&e(d).type==="task"&&e(w))?b(ee):b(ye,!1)})}var Te=a(S,2);{var Ye=b=>{var v=wn(),L=a(o(v),2);{var B=f=>{var T=kn();Ya(T),he(T,()=>e(fs),X=>t(fs,X)),c(f,T)},C=f=>{var T=hn();c(f,T)};p(L,f=>{e(w),r(()=>{var T;return(T=e(w).description)==null?void 0:T.trim()})?f(B):f(C,!1)})}n(v),c(b,v)};p(Te,b=>{e(d),e(w),r(()=>e(d)&&e(d).type==="task"&&e(w))&&b(Ye)})}var Fe=a(Te,2);{var ot=b=>{var v=Pn(),L=a(o(v),2);{var B=f=>{var T=xn();c(f,T)},C=f=>{var T=ke(),X=le(T);{var Y=G=>{var ge=Tn(),x=le(ge);hl(x,{get items(){return e(tt)},get selectedIds(){return e(Vt)},get disabled(){return e(Ea)},showStatus:!0,onChange:_r});var O=a(x,2);{var De=E=>{var Q=In();c(E,Q)};p(O,E=>{e(Vt),r(()=>e(Vt).length===0)&&E(De)})}var H=a(O,2),pe=a(H,2);{var Z=E=>{var Q=Sn();c(E,Q)};p(pe,E=>{e(Ea)&&E(Z)})}j("click",H,Sl),c(G,ge)},F=G=>{var ge=qn(),x=le(ge);{var O=pe=>{var Z=En();c(pe,Z)},De=pe=>{var Z=ke(),E=le(Z);{var Q=xe=>{var Ae=Dn(),Re=le(Ae);$e(Re,5,()=>e(He),rt,(gt,jt)=>{var lt=Cn(),Mt=a(o(lt));n(lt),y(()=>q(Mt,` ${e(jt),r(()=>e(jt).name)??""}`)),c(gt,lt)}),n(Re);var Ze=a(Re,2),wt=o(Ze);n(Ze),y(()=>q(wt,`${e(He),r(()=>e(He).length)??""} required item${e(He),r(()=>e(He).length>1?"s are":" is")??""} missing.`)),c(xe,Ae)},Ee=xe=>{var Ae=An();c(xe,Ae)};p(E,xe=>{e(He),r(()=>e(He).length>0)?xe(Q):xe(Ee,!1)},!0)}c(pe,Z)};p(x,pe=>{e(Vt),r(()=>e(Vt).length===0)?pe(O):pe(De,!1)})}var H=a(x,2);j("click",H,Sl),c(G,ge)};p(X,G=>{e(Ca)?G(Y):G(F,!1)},!0)}c(f,T)};p(L,f=>{e(tt),r(()=>e(tt).length===0)?f(B):f(C,!1)})}n(v),c(b,v)};p(Fe,b=>{e(d),e(w),r(()=>e(d)&&e(d).type==="task"&&e(w))&&b(ot)})}n(fe);var ct=a(fe,2),dt=a(o(ct),2);{var vt=b=>{var v=Mn();c(b,v)},Ot=b=>{var v=ke(),L=le(v);{var B=f=>{var T=Rn();c(f,T)},C=f=>{var T=Fn();$e(T,5,()=>e(Ts),rt,(X,Y)=>{var F=Un(),G=o(F),ge=o(G,!0);n(G);var x=a(G,2),O=o(x),De=o(O,!0);n(O),n(x);var H=a(x,2),pe=o(H,!0);n(H),n(F),y((Z,E)=>{q(ge,Z),q(De,E),q(pe,(e(Y),r(()=>e(Y).content)))},[()=>(e(de),e(Y),r(()=>Os(e(de)[e(Y).user_id]??"U"))),()=>(e(Y),r(()=>kr(e(Y).created_at)))]),c(X,F)}),n(T),c(f,T)};p(L,f=>{e(Ts),r(()=>e(Ts).length===0)?f(B):f(C,!1)},!0)}c(b,v)};p(dt,b=>{e(oa)?b(vt):b(Ot,!1)})}var mt=a(dt,2),pt=o(mt);Ya(pt);var te=a(pt,2),R=o(te,!0);n(te),n(mt),n(ct);var P=a(ct,2),ie=o(P);{var U=b=>{var v=Ln();y(()=>v.disabled=!e(yt)||e(Rs)),j("click",v,mr),c(b,v)},M=b=>{var v=ke(),L=le(v);{var B=C=>{var f=On();y(()=>f.disabled=!e(Vs)||e(Rs)),j("click",f,pr),c(C,f)};p(L,C=>{e(d),e(N),r(()=>e(d).type==="subtask"&&e(N))&&C(B)},!0)}c(b,v)};p(ie,b=>{e(d),e(w),r(()=>e(d).type==="task"&&e(w))?b(U):b(M,!1)})}var ae=a(ie,2);{var oe=b=>{var v=Nn();j("click",v,fr),c(b,v)},we=b=>{var v=ke(),L=le(v);{var B=C=>{var f=Bn();j("click",f,br),c(C,f)};p(L,C=>{e(d),e(N),r(()=>e(d).type==="subtask"&&e(N))&&C(B)},!0)}c(b,v)};p(ae,b=>{e(d),e(w),r(()=>e(d).type==="task"&&e(w))?b(oe):b(we,!1)})}n(P),n(ne),y(b=>{q(_e,(e(d),r(()=>e(d).type==="task"?"Task":"Subtask"))),te.disabled=b,q(R,e(Qs)?"Adding‚Ä¶":"Add")},[()=>(e(Qs),e(Es),r(()=>e(Qs)||!e(Es).trim()))]),he(pt,()=>e(Es),b=>t(Es,b)),j("submit",mt,Nt(Mr)),c(J,ne)};p(Kr,J=>{e(d)&&J(Xr)})}n(jl);var Zl=a(jl,2);{var Jr=J=>{var ne=ao(),fe=le(ne),ve=a(fe,2),ze=a(o(ve),2);{var _e=V=>{var S=Wn(),ee=o(S,!0);n(S),y(()=>q(ee,e($a))),c(V,S)};p(ze,V=>{e($a)&&V(_e)})}var Me=a(ze,2);{var Ke=V=>{var S=Yn(),ee=o(S,!0);n(S),y(()=>q(ee,e(Fa))),c(V,S)};p(Me,V=>{e(Fa)&&V(Ke)})}var st=a(Me,2),nt=o(st),me=o(nt),Ie=a(o(me),3);{var Se=V=>{var S=Zn();c(V,S)};p(Ie,V=>{e(ut)==="admin"&&V(Se)})}n(me),n(nt);var at=a(nt);$e(at,5,()=>e(be),rt,(V,S,ee)=>{var ye=Xn(),Te=o(ye),Ye=o(Te,!0);n(Te);var Fe=a(Te),ot=o(Fe);{var ct=te=>{var R=Gn();y(()=>{e(S),Be(()=>{e(ya),e(Qt)})});var P=o(R);{var ie=ae=>{var oe=Qn();oe.value=oe.__value="admin",c(ae,oe)};p(P,ae=>{e(Qt)&&ae(ie)})}var U=a(P);U.value=U.__value="editor";var M=a(U);M.value=M.__value="viewer",n(R),y(()=>R.disabled=(e(ya),e(S),r(()=>e(ya)===(e(S).user_id||e(S).invited_email)))),Qe(R,()=>e(S).role,ae=>(e(S).role=ae,Be(()=>e(be)))),j("change",R,ae=>Ir(e(S).user_id||"",ae.target.value,e(S).invited_email?e(S).invited_email:void 0)),c(te,R)},dt=te=>{var R=vs();y(()=>q(R,(e(S),r(()=>e(S).role)))),c(te,R)};p(ot,te=>{e(ut),e(S),e($),r(()=>{var R;return e(ut)==="admin"&&e(S).user_id!==((R=e($))==null?void 0:R.user.id)})?te(ct):te(dt,!1)})}n(Fe);var vt=a(Fe),Ot=o(vt,!0);n(vt);var mt=a(vt);{var pt=te=>{var R=Kn(),P=o(R);{var ie=U=>{var M=Hn(),ae=o(M,!0);n(M),y(()=>{M.disabled=(e(Xs),e(S),r(()=>e(Xs)===(e(S).user_id||e(S).invited_email))),q(ae,(e(Xs),e(S),r(()=>e(Xs)===(e(S).user_id||e(S).invited_email)?"Removing‚Ä¶":"Remove")))}),j("click",M,()=>Sr(e(S).user_id||void 0,e(S).invited_email||void 0)),c(U,M)};p(P,U=>{e(S),e($),r(()=>{var M;return e(S).user_id&&e(S).user_id!==((M=e($))==null?void 0:M.user.id)||!e(S).user_id&&e(S).invited_email})&&U(ie)})}n(R),c(te,R)};p(mt,te=>{e(ut)==="admin"&&te(pt)})}n(ye),y(()=>{q(Ye,(e(S),r(()=>e(S).email))),q(Ot,(e(S),r(()=>e(S).status)))}),c(V,ye)}),n(at),n(st);var h=a(st,2);{var Oe=V=>{var S=so(),ee=a(o(S),2),ye=o(ee);Ce(ye);var Te=a(ye,2);y(()=>{e(ga),Be(()=>{e(Qt)})});var Ye=o(Te);{var Fe=P=>{var ie=Jn();ie.value=ie.__value="admin",c(P,ie)};p(Ye,P=>{e(Qt)&&P(Fe)})}var ot=a(Ye);ot.value=ot.__value="editor";var ct=a(ot);ct.value=ct.__value="viewer",n(Te);var dt=a(Te,2);{var vt=P=>{var ie=$n();c(P,ie)};p(dt,P=>{e(Qt)||P(vt)})}var Ot=a(dt,2);n(ee);var mt=a(ee,2);{var pt=P=>{var ie=eo(),U=o(ie,!0);n(ie),y(()=>q(U,e(ja))),c(P,ie)};p(mt,P=>{e(ja)&&P(pt)})}var te=a(mt,2);{var R=P=>{var ie=to(),U=o(ie,!0);n(ie),y(()=>q(U,e(Ua))),c(P,ie)};p(te,P=>{e(Ua)&&P(R)})}n(S),y(P=>Ot.disabled=P,[()=>(e(Ks),e(ys),r(()=>e(Ks)||!e(ys).trim()))]),he(ye,()=>e(ys),P=>t(ys,P)),Qe(Te,()=>e(ga),P=>t(ga,P)),j("submit",ee,Nt(xr)),c(V,S)};p(h,V=>{e(ut)==="admin"&&V(Oe)})}var Xe=a(h,2);n(ve),j("click",fe,xa),j("keydown",fe,V=>(V.key==="Escape"||V.key==="Enter")&&xa()),j("click",Xe,xa),j("click",ve,St(function(V){Bt.call(this,Ge,V)})),c(J,ne)};p(Zl,J=>{e(rs)&&J(Jr)})}var Ql=a(Zl,2);{var $r=J=>{var ne=io(),fe=le(ne),ve=a(fe,2),ze=a(o(ve),2),_e=o(ze),Me=a(o(_e),2);Ce(Me),n(_e);var Ke=a(_e,2),st=a(o(Ke),2);Ya(st),n(Ke);var nt=a(Ke,2),me=a(o(nt),2);Ce(me),n(nt);var Ie=a(nt,2),Se=o(Ie),at=o(Se,!0);n(Se);var h=a(Se,2);{var Oe=ee=>{var ye=lo();c(ee,ye)};p(h,ee=>{e(Ja)&&ee(Oe)})}var Xe=a(h,2);{var V=ee=>{var ye=ro(),Te=o(ye,!0);n(ye),y(()=>q(Te,e(Ra))),c(ee,ye)};p(Xe,ee=>{e(Ra)&&ee(V)})}n(Ie),n(ze);var S=a(ze,2);n(ve),y(()=>{Se.disabled=e(Ma),q(at,e(Ma)?"Saving‚Ä¶":"Save Changes")}),j("click",fe,xa),he(Me,()=>e(Aa),ee=>t(Aa,ee)),he(st,()=>e(qa),ee=>t(qa,ee)),he(me,()=>e(Pa),ee=>t(Pa,ee)),j("submit",ze,Nt(wr)),j("click",S,xa),j("click",ve,St(function(ee){Bt.call(this,Ge,ee)})),c(J,ne)};p(Ql,J=>{e(Gt)&&e(Qt)&&J($r)})}var Gl=a(Ql,2);{var ei=J=>{var ne=uo(),fe=le(ne),ve=a(fe,2),ze=a(o(ve),2);{var _e=me=>{var Ie=no(),Se=o(Ie,!0);n(Ie),y(()=>q(Se,e(ms))),c(me,Ie)};p(ze,me=>{e(ms)&&me(_e)})}var Me=a(ze,2);{var Ke=me=>{var Ie=oo();c(me,Ie)},st=me=>{var Ie=vo(),Se=le(Ie),at=o(Se);Ce(at);var h=a(at,2),Oe=o(h,!0);n(h),n(Se);var Xe=a(Se,2);$e(Xe,7,()=>e(tt),V=>V.id,(V,S)=>{var ee=co(),ye=o(ee),Te=o(ye,!0);n(ye);var Ye=a(ye,2),Fe=a(Ye,4),ot=o(Fe,!0);n(Fe),n(ee),y(()=>{q(Te,(e(S),r(()=>e(S).name))),us(Ye,`
                    width:1.2em;height:1.2em;display:inline-block;border-radius:0.6em;
                    background:${e(S),r(()=>e(S).status==="present"?"#47e37a":"#e74c3c")??""};
                    box-shadow:0 1px 4px #0001;vertical-align:middle;cursor:pointer;border:none;
                `),et(Ye,"title",(e(S),r(()=>e(S).status==="present"?"Mark as not present":"Mark as present"))),Fe.disabled=(e(As),e(S),r(()=>e(As)===e(S).id)),q(ot,(e(As),e(S),r(()=>e(As)===e(S).id?"Removing‚Ä¶":"Remove")))}),j("click",Ye,()=>ur(e(S).id,e(S).status)),j("click",Fe,()=>vr(e(S).id)),c(V,ee)}),n(Xe),y(()=>{h.disabled=e(_a)||e(Gs),q(Oe,e(_a)?"Adding‚Ä¶":"Add")}),he(at,()=>e(za),V=>t(za,V)),j("submit",Se,Nt(dr)),c(me,Ie)};p(Me,me=>{e(Gs)?me(Ke):me(st,!1)})}var nt=a(Me,2);n(ve),j("click",fe,()=>t(Ds,!1)),j("keydown",fe,me=>(me.key==="Escape"||me.key==="Enter")&&t(Ds,!1)),j("click",nt,()=>t(Ds,!1)),j("click",ve,St(function(me){Bt.call(this,Ge,me)})),c(J,ne)};p(Gl,J=>{e(Ds)&&J(ei)})}var ti=a(Gl,2);{var si=J=>{var ne=mo(),fe=o(ne),ve=o(fe),ze=a(o(ve),2);n(ve);var _e=a(ve,2),Me=o(_e),Ke=o(Me),st=a(o(Ke),2);Ce(st),Bs(st,te=>t(ua,te),()=>e(ua)),n(Ke);var nt=a(Ke,2),me=a(o(nt),2);Ya(me),n(nt);var Ie=a(nt,2),Se=o(Ie),at=a(o(Se),2);y(()=>{e(Cs),Be(()=>{})});var h=o(at);h.value=h.__value="open";var Oe=a(h);Oe.value=Oe.__value="in_progress";var Xe=a(Oe);Xe.value=Xe.__value="done",n(at),n(Se);var V=a(Se,2),S=a(o(V),2);Ce(S),n(V);var ee=a(V,2),ye=a(o(ee),2);y(()=>{e(kt),Be(()=>{e(be)})});var Te=o(ye);Te.value=Te.__value="";var Ye=a(Te);$e(Ye,1,()=>e(be),rt,(te,R)=>{var P=ke(),ie=le(P);{var U=M=>{var ae=zo(),oe=o(ae,!0);n(ae);var we={};y(()=>{q(oe,(e(R),r(()=>e(R).email))),we!==(we=(e(R),r(()=>e(R).user_id)))&&(ae.value=(ae.__value=(e(R),r(()=>e(R).user_id)))??"")}),c(M,ae)};p(ie,M=>{e(R),r(()=>e(R).user_id)&&M(U)})}c(te,P)}),n(ye),n(ee),n(Ie);var Fe=a(Ie,2),ot=a(o(Fe),2);$e(ot,5,()=>e(tt),rt,(te,R)=>{var P=_o(),ie=o(P),U=a(ie,2);Ce(U);var M=a(U,2),ae=o(M,!0);n(M);var oe=a(M,2),we=o(oe,!0);n(oe),n(P),y(b=>{us(ie,`
                        width:1em;
                        height:1em;
                        border-radius:0.5em;
                        background: ${e(R),r(()=>e(R).status==="present"?"#47e37a":"#e74c3c")??""};
                        border: 1.5px solid #aaa;
                        display:inline-block;
                    `),et(ie,"title",(e(R),r(()=>e(R).status==="present"?"Present":"Missing"))),et(U,"id",(e(R),r(()=>"item-"+e(R).id))),lr(U,b),et(M,"for",(e(R),r(()=>"item-"+e(R).id))),q(ae,(e(R),r(()=>e(R).name))),us(oe,`font-size:0.94em;color:${e(R),r(()=>e(R).status==="present"?"#47e37a":"#e74c3c")??""};`),q(we,(e(R),r(()=>e(R).status==="present"?"Present":"Missing")))},[()=>(e(Et),e(R),r(()=>e(Et).includes(e(R).id)))]),j("change",U,()=>{e(Et).includes(e(R).id)?t(Et,e(Et).filter(b=>b!==e(R).id)):t(Et,[...e(Et),e(R).id])}),c(te,P)}),n(ot),n(Fe);var ct=a(Fe,2),dt=o(ct),vt=a(dt,2),Ot=a(vt,2);n(ct),n(Me),n(_e);var mt=a(_e,2),pt=o(mt);n(mt),n(fe),n(ne),y((te,R)=>{dt.disabled=te,vt.disabled=R},[()=>(e(We),e(Dt),r(()=>e(We)||!e(Dt).trim())),()=>(e(We),e(Dt),r(()=>e(We)||!e(Dt).trim()))]),j("click",ze,()=>t(es,!1)),he(st,()=>e(Dt),te=>t(Dt,te)),he(me,()=>e(ca),te=>t(ca,te)),Qe(at,()=>e(Cs),te=>t(Cs,te)),he(S,()=>e(da),te=>t(da,te)),Qe(ye,()=>e(kt),te=>t(kt,te)),j("click",vt,or),j("click",Ot,wl),j("submit",Me,Nt(nr)),j("click",pt,()=>t(es,!1)),j("click",fe,St(function(te){Bt.call(this,Ge,te)})),j("keydown",ne,te=>te.key==="Escape"&&t(es,!1)),j("click",ne,()=>t(es,!1)),c(J,ne)};p(ti,J=>{e(es)&&J(si)})}y((J,ne,fe,ve,ze,_e,Me,Ke,st)=>{q(_t,(e(Le),r(()=>e(Le).name))),q(ol,(e(Le),r(()=>e(Le).description))),q(Va,` ${J??""}`),q(Vr,e(ut)&&`Role: ${e(ut)}`),Nl=Ia(dl,1,"toolbar-btn svelte-zjczzm",null,Nl,ne),Bl=Ia(vl,1,"toolbar-btn svelte-zjczzm",null,Bl,fe),_l.disabled=ve,ml.disabled=ze,pl.disabled=_e,fl.disabled=Me,bl.disabled=Ke,Yl.disabled=st},[()=>(e(Le),r(()=>e(Le).deadline?al(e(Le).deadline):"‚Äî")),()=>({"active-tab":e(rs)}),()=>({"active-tab":e(Ds)}),()=>(e(d),e(je),e(qe),r(()=>!zt()||!e(d)||e(d).type==="task"&&e(je)!==null||e(d).type==="subtask"&&e(qe)!==null)),()=>(e(d),e(je),e(qe),r(()=>!zt()||!e(d)||!(e(d).type==="task"||e(d).type==="subtask")||e(je)!==null||e(qe)!==null)),()=>(e(d),e(je),e(Ve),e(qe),e(m),r(()=>{var J,ne,fe;return!zt()||!e(d)||((J=e(d))==null?void 0:J.type)==="task"&&(e(je)!==null||e(Ve).findIndex(ve=>{var ze;return ve.id===((ze=e(d))==null?void 0:ze.id)})<=0)||((ne=e(d))==null?void 0:ne.type)==="subtask"&&(e(qe)!==null||!((fe=e(d))!=null&&fe.parentTaskId)||(()=>{const ve=e(m).find(ze=>{var _e;return ze.id===((_e=e(d))==null?void 0:_e.parentTaskId)});return ve?ve.subtasks.findIndex(ze=>{var _e;return ze.id===((_e=e(d))==null?void 0:_e.id)})<=0:!0})())})),()=>(e(d),e(je),e(Ve),e(qe),e(m),r(()=>{var J,ne,fe;return!zt()||!e(d)||((J=e(d))==null?void 0:J.type)==="task"&&(e(je)!==null||e(Ve).findIndex(ve=>{var ze;return ve.id===((ze=e(d))==null?void 0:ze.id)})===e(Ve).length-1)||((ne=e(d))==null?void 0:ne.type)==="subtask"&&(e(qe)!==null||!((fe=e(d))!=null&&fe.parentTaskId)||(()=>{const ve=e(m).find(ze=>{var _e;return ze.id===((_e=e(d))==null?void 0:_e.parentTaskId)});return ve?ve.subtasks.findIndex(ze=>{var _e;return ze.id===((_e=e(d))==null?void 0:_e.id)})===ve.subtasks.length-1:!0})())})),()=>(e(d),e(je),e(qe),r(()=>!zt()||!e(d)||e(d).type==="task"&&e(je)!==null||e(d).type==="subtask"&&e(qe)!==null)),()=>(e(d),e(je),e(qe),r(()=>!zt()||!e(d)||e(d).type==="task"&&e(je)!==null||e(d).type==="subtask"&&e(qe)!==null))]),j("click",Xt,()=>tr("/projects")),j("click",dl,()=>{t(rs,!e(rs)),t(Gt,!1)}),j("click",vl,()=>{t(Ds,!e(Ds)),t(rs,!1),t(Gt,!1)}),j("click",Wl,()=>t(es,!0)),j("click",_l,Ur),j("click",ml,Fr),j("click",pl,Lr),j("click",fl,()=>e(d)&&e(d).type==="task"?Ml(1):e(d)&&e(d).type==="subtask"?Fl(1):void 0),j("click",bl,rl),j("click",Yl,Cr),c(W,se)};p(k,W=>{e(Le)&&W(A)},!0)}c(I,D)};p(l,I=>{e(na)?I(u):I(g,!1)},!0)}c(s,i)};p(Or,s=>{e(Ws)?s(Nr):s(Br,!1)})}n(nl),c(Za,nl),ar(),Ss()}export{Uo as component};
